var ie=Object.defineProperty;var le=(s,t,a)=>t in s?ie(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var L=(s,t,a)=>le(s,typeof t!="symbol"?t+"":t,a);import{r as d,a as ce,b as F}from"./vendor-Gm9i_4Ku.js";import{B as oe}from"./router-CxV1K3nC.js";import{f as P,i as R,a as de,b as me}from"./utils-CsonoGMZ.js";import{M as V,P as X,L as xe,E as ue,a as G,X as U,D as M,C as he,H as pe,b as Q,c as ge,W as fe,d as ee,e as z,T as J,U as _,f as ye,S as be,g as je,h as Ne,i as we,j as ve,k as Se,l as Ae,m as ke}from"./icons-CUrUa9pu.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function a(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=a(l);fetch(l.href,r)}})();var te={exports:{}},q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pe=d,Ce=Symbol.for("react.element"),De=Symbol.for("react.fragment"),Be=Object.prototype.hasOwnProperty,Ee=Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oe={key:!0,ref:!0,__self:!0,__source:!0};function se(s,t,a){var i,l={},r=null,n=null;a!==void 0&&(r=""+a),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(n=t.ref);for(i in t)Be.call(t,i)&&!Oe.hasOwnProperty(i)&&(l[i]=t[i]);if(s&&s.defaultProps)for(i in t=s.defaultProps,t)l[i]===void 0&&(l[i]=t[i]);return{$$typeof:Ce,type:s,key:r,ref:n,props:l,_owner:Ee.current}}q.Fragment=De;q.jsx=se;q.jsxs=se;te.exports=q;var e=te.exports,H={},Z=ce;H.createRoot=Z.createRoot,H.hydrateRoot=Z.hydrateRoot;class Te{constructor(){L(this,"dbName","LuckyPickDB");L(this,"version",1);L(this,"db",null)}async init(){return new Promise((t,a)=>{const i=indexedDB.open(this.dbName,this.version);i.onerror=()=>a(i.error),i.onsuccess=()=>{this.db=i.result,t()},i.onupgradeneeded=l=>{const r=l.target.result;r.objectStoreNames.contains("sessions")||r.createObjectStore("sessions",{keyPath:"id"}),r.objectStoreNames.contains("bets")||r.createObjectStore("bets",{keyPath:"id"}),r.objectStoreNames.contains("results")||r.createObjectStore("results",{keyPath:"id"}),r.objectStoreNames.contains("transactions")||r.createObjectStore("transactions",{keyPath:"id"}),r.objectStoreNames.contains("user")||r.createObjectStore("user",{keyPath:"id"}),r.objectStoreNames.contains("offlineActions")||r.createObjectStore("offlineActions",{keyPath:"id",autoIncrement:!0})}})}async saveData(t,a){return this.db||await this.init(),new Promise((i,l)=>{const p=this.db.transaction([t],"readwrite").objectStore(t).put(a);p.onerror=()=>l(p.error),p.onsuccess=()=>i()})}async getData(t,a){return this.db||await this.init(),new Promise((i,l)=>{const n=this.db.transaction([t],"readonly").objectStore(t),p=a?n.get(a):n.getAll();p.onerror=()=>l(p.error),p.onsuccess=()=>i(p.result)})}async saveOfflineAction(t){const a={...t,timestamp:new Date().toISOString(),synced:!1};await this.saveData("offlineActions",a)}async getOfflineActions(){return(await this.getData("offlineActions")).filter(a=>!a.synced)}async markActionSynced(t){return this.db||await this.init(),new Promise((a,i)=>{const r=this.db.transaction(["offlineActions"],"readwrite").objectStore("offlineActions"),n=r.get(t);n.onsuccess=()=>{const p=n.result;if(p){p.synced=!0;const u=r.put(p);u.onsuccess=()=>a(),u.onerror=()=>i(u.error)}else a()},n.onerror=()=>i(n.error)})}}const A=new Te,Y=()=>{const[s,t]=d.useState(navigator.onLine),[a,i]=d.useState(!1);return d.useEffect(()=>{const l=()=>{t(!0),a&&("serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(n=>n.sync.register("background-sync")),i(!1))},r=()=>{t(!1),i(!0)};return window.addEventListener("online",l),window.addEventListener("offline",r),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",r)}},[a]),{isOnline:s,wasOffline:a}},ae=d.createContext(void 0),I=()=>{const s=d.useContext(ae);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Ie=({children:s})=>{const[t,a]=d.useState(null),[i,l]=d.useState(!0),{isOnline:r}=Y();d.useEffect(()=>{(async()=>{l(!0);try{const j=localStorage.getItem("user");if(j){const x=JSON.parse(j);a(x),await A.saveData("user",x)}else if(!r){const x=await A.getData("user","user1");x&&a(x)}}catch(j){console.error("Failed to load user data:",j)}finally{l(!1)}})()},[r]);const n=async(g,j)=>{try{if(g==="test@gmail.com"&&j==="12345677"){const x={id:"user1",email:g,fullName:"Demo User",isAdmin:!1,walletBalance:1e3,createdAt:new Date};return a(x),localStorage.setItem("user",JSON.stringify(x)),await A.saveData("user",x),!0}else if(g==="Admin@admin.com"&&j==="9794478972"){const x={id:"admin1",email:g,fullName:"System Admin",isAdmin:!0,walletBalance:0,createdAt:new Date};return a(x),localStorage.setItem("user",JSON.stringify(x)),await A.saveData("user",x),!0}return!1}catch(x){return console.error("Login failed:",x),!1}},p=()=>{a(null),localStorage.removeItem("user")},u=g=>{if(t){const j={...t,walletBalance:t.walletBalance+g};a(j),localStorage.setItem("user",JSON.stringify(j)),A.saveData("user",j),r||A.saveOfflineAction({type:"updateWallet",data:{userId:t.id,amount:g}})}};return e.jsx(ae.Provider,{value:{user:t,loading:i,login:n,logout:p,updateWallet:u},children:s})},re=d.createContext(void 0),O=()=>{const s=d.useContext(re);if(!s)throw new Error("useApp must be used within an AppProvider");return s},Me=({children:s})=>{const[t,a]=d.useState([]),[i,l]=d.useState([]),[r,n]=d.useState([]),[p,u]=d.useState([]),[g,j]=d.useState([]),{isOnline:x}=Y();d.useEffect(()=>{(async()=>{try{if(await A.init(),!x){const y=await A.getData("sessions"),w=await A.getData("bets"),v=await A.getData("results"),k=await A.getData("transactions");y!=null&&y.length&&a(y),w!=null&&w.length&&l(w),v!=null&&v.length&&n(v),k!=null&&k.length&&u(k)}}catch(y){console.error("Failed to initialize offline storage:",y)}})()},[x]),d.useEffect(()=>{if(t.length===0){const o=P(new Date,"yyyy-MM-dd"),y=[{id:"session-1330",time:"13:30",date:o,isActive:!0,betsCloseAt:"13:25",totalPool:0,createdBy:"system"},{id:"session-1830",time:"18:30",date:o,isActive:!0,betsCloseAt:"18:25",totalPool:0,createdBy:"system"}];a(y),y.forEach(w=>{A.saveData("sessions",w)})}},[t.length]),d.useEffect(()=>{t.forEach(o=>{A.saveData("sessions",o)})},[t]),d.useEffect(()=>{i.forEach(o=>{A.saveData("bets",o)})},[i]),d.useEffect(()=>{r.forEach(o=>{A.saveData("results",o)})},[r]),d.useEffect(()=>{p.forEach(o=>{A.saveData("transactions",o)})},[p]);const b=(o,y)=>{const w=P(new Date,"yyyy-MM-dd"),v=P(de(new Date(`${w}T${o}:00`),-5),"HH:mm"),k={id:`session-${Date.now()}`,name:y,time:o,date:w,isActive:!0,betsCloseAt:v,totalPool:0,createdBy:"admin"};a(D=>[...D,k]),x||A.saveOfflineAction({type:"createSession",data:k})},f=(o,y,w,v)=>{const k=t.find(B=>B.id===o);if(!k)return!1;const D=new Date,E=P(D,"yyyy-MM-dd"),W=new Date(`${E}T${k.betsCloseAt}:00`);if(R(D,W))return!1;const T={id:`bet-${Date.now()}`,userId:v,sessionId:o,number:y,amount:w,timestamp:D};return l(B=>[...B,T]),a(B=>B.map(C=>C.id===o?{...C,totalPool:C.totalPool+w}:C)),x||A.saveOfflineAction({type:"placeBet",data:T}),!0},h=o=>{const y=i.filter(S=>S.sessionId===o),w=t.find(S=>S.id===o);if(!w||y.length===0)return;const v={};for(let S=0;S<=9;S++)v[S]=0;y.forEach(S=>{v[S.number]+=S.amount});let k=0,D=v[0];for(let S=1;S<=9;S++)v[S]<D&&(k=S,D=v[S]);const E=w.totalPool,W=D===0&&E>0;let T,B,C;if(W)T=E,B=0,C=0;else{T=E*.1;const S=E*.9;C=y.filter(ne=>ne.number===k).length,B=C>0?S/C:0}const K={id:`result-${Date.now()}`,sessionId:o,winningNumber:k,totalPool:E,adminFee:T,winnerCount:C,winnerPayout:B,timestamp:new Date,isZeroBetWin:W};n(S=>[...S,K]),a(S=>S.map($=>$.id===o?{...$,isActive:!1}:$)),x||A.saveOfflineAction({type:"processJackpot",data:{sessionId:o,result:K}})},c=o=>{const y={...o,id:`txn-${Date.now()}`};u(w=>[...w,y]),x||A.saveOfflineAction({type:"addTransaction",data:y})},N=(o,y)=>{const w={id:`withdrawal-${Date.now()}`,userId:o,amount:y,status:"pending",requestedAt:new Date};j(v=>[...v,w]),x||A.saveOfflineAction({type:"requestWithdrawal",data:w})},m=(o,y)=>{j(w=>w.map(v=>v.id===o?{...v,status:y,processedAt:new Date,processedBy:"admin"}:v)),x||A.saveOfflineAction({type:"processWithdrawal",data:{id:o,status:y}})};return e.jsx(re.Provider,{value:{sessions:t,bets:i,results:r,transactions:p,withdrawals:g,createSession:b,placeBet:f,processJackpot:h,addTransaction:c,requestWithdrawal:N,processWithdrawal:m},children:s})},We=()=>{const[s,t]=d.useState("email"),[a,i]=d.useState(""),[l,r]=d.useState(""),[n,p]=d.useState(""),[u,g]=d.useState(!1),[j,x]=d.useState(""),[b,f]=d.useState(!1),{login:h}=I(),c=async N=>{N.preventDefault(),x(""),f(!0);try{await h(a,n)||x("Invalid credentials")}catch{x("Login failed")}finally{f(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"LuckyPick"}),e.jsx("p",{className:"text-gray-600",children:"Daily Number Lottery"})]}),e.jsxs("div",{className:"flex mb-6 bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{type:"button",onClick:()=>t("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="email"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(V,{className:"w-4 h-4 inline mr-2"}),"Email"]}),e.jsxs("button",{type:"button",onClick:()=>t("phone"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="phone"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(X,{className:"w-4 h-4 inline mr-2"}),"Phone"]})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s==="email"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",value:a,onChange:N=>i(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"tel",value:l,onChange:N=>r(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your phone number",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:u?"text":"password",value:n,onChange:N=>p(N.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?e.jsx(ue,{className:"w-5 h-5"}):e.jsx(G,{className:"w-5 h-5"})})]})]}),j&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:j}),e.jsx("button",{type:"submit",disabled:b,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?"Signing In...":"Sign In"})]}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Demo Accounts:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"User:"})," test@gmail.com / 12345677"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Admin:"})," Admin@admin.com / 9794478972"]})]})]})]})})},$e=({sessionId:s,onClose:t})=>{const{user:a,updateWallet:i}=I(),{sessions:l,placeBet:r,addTransaction:n}=O(),[p,u]=d.useState(null),[g,j]=d.useState(""),[x,b]=d.useState(""),f=l.find(c=>c.id===s),h=()=>{if(p===null){b("Please select a number");return}const c=parseFloat(g);if(isNaN(c)||c<1){b("Minimum bet amount is ₹1");return}if(!a||c>a.walletBalance){b("Insufficient wallet balance");return}r(s,p,c,a.id)?(i(-c),n({userId:a.id,type:"bet",amount:-c,status:"completed",timestamp:new Date,description:`Bet on number ${p} for session ${f==null?void 0:f.time}`}),t()):b("Failed to place bet. Betting may be closed.")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Place Your Bet"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(U,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:(f==null?void 0:f.name)||`Session ${f==null?void 0:f.time}`}),e.jsx("p",{className:"text-gray-600",children:"Choose a number from 0-9"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Number"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[0,1,2,3,4,5,6,7,8,9].map(c=>e.jsx("button",{onClick:()=>u(c),className:`h-12 rounded-lg font-semibold transition-colors ${p===c?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:c},c))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bet Amount (₹)"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"number",value:g,onChange:c=>j(c.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter amount (min ₹1)",min:"1",step:"1"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Wallet Balance: ₹",a==null?void 0:a.walletBalance]})]}),x&&e.jsx("div",{className:"mb-4 text-red-600 text-sm",children:x}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:h,className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Place Bet"})]})]})]})})},Le=({onClose:s})=>{const{user:t,updateWallet:a}=I(),{transactions:i,addTransaction:l,requestWithdrawal:r}=O(),[n,p]=d.useState("balance"),[u,g]=d.useState(""),[j,x]=d.useState(""),[b,f]=d.useState(""),h=i.filter(m=>m.userId===(t==null?void 0:t.id)),c=()=>{const m=parseFloat(u);if(isNaN(m)||m<10){f("Minimum deposit amount is ₹10");return}t&&(a(m),l({userId:t.id,type:"deposit",amount:m,status:"completed",timestamp:new Date,description:"Wallet deposit via UPI"}),g(""),f(""))},N=()=>{const m=parseFloat(j);if(isNaN(m)||m<50){f("Minimum withdrawal amount is ₹50");return}if(!t||m>t.walletBalance){f("Insufficient balance");return}r(t.id,m),l({userId:t.id,type:"withdrawal",amount:-m,status:"pending",timestamp:new Date,description:`Withdrawal request for ₹${m}`}),x(""),f("")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"My Wallet"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(U,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>p("balance"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${n==="balance"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(he,{className:"w-4 h-4 inline mr-2"}),"Balance"]}),e.jsxs("button",{onClick:()=>p("history"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${n==="history"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(pe,{className:"w-4 h-4 inline mr-2"}),"History"]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[n==="balance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["₹",t==null?void 0:t.walletBalance]}),e.jsx("p",{className:"text-gray-600",children:"Current Balance"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-green-800 mb-3 flex items-center",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Add Funds"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"number",value:u,onChange:m=>g(m.target.value),className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Amount (min ₹10)",min:"10"}),e.jsx("button",{onClick:c,className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Add via UPI"})]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-red-800 mb-3 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Withdraw Funds"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"number",value:j,onChange:m=>x(m.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Amount (min ₹50)",min:"50"}),e.jsx("button",{onClick:N,className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Request Withdrawal"}),e.jsx("p",{className:"text-xs text-red-600",children:"Requires admin approval"})]})]})]}),b&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:b})]}),n==="history"&&e.jsx("div",{className:"space-y-4",children:h.length===0?e.jsx("p",{className:"text-gray-500 text-center",children:"No transactions yet"}):h.slice().reverse().map(m=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.description}),e.jsx("p",{className:"text-sm text-gray-600",children:P(m.timestamp,"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${m.amount>0?"text-green-600":"text-red-600"}`,children:[m.amount>0?"+":"","₹",Math.abs(m.amount)]}),e.jsx("p",{className:`text-xs ${m.status==="completed"?"text-green-600":m.status==="pending"?"text-yellow-600":"text-red-600"}`,children:m.status})]})]},m.id))})]})]})})},Re=()=>{const{user:s,logout:t}=I(),{sessions:a,results:i,bets:l}=O(),[r,n]=d.useState(null),[p,u]=d.useState(!1),[g,j]=d.useState(new Date);d.useEffect(()=>{const h=setInterval(()=>{j(new Date)},1e3);return()=>clearInterval(h)},[]);const x=(h,c)=>{const N=P(new Date,"yyyy-MM-dd"),m=new Date(`${N}T${c}:00`),o=new Date(`${N}T${h}:00`);if(R(g,o))return"Session Ended";if(R(g,m))return"Betting Closed";const y=m.getTime()-g.getTime(),w=Math.floor(y/6e4),v=Math.floor(y%6e4/1e3);return`${w}:${v.toString().padStart(2,"0")}`},b=h=>{const c=P(new Date,"yyyy-MM-dd"),N=new Date(`${c}T${h}:00`);return me(g,N)},f=h=>l.filter(c=>c.sessionId===h&&c.userId===(s==null?void 0:s.id));return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"LuckyPick"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",(s==null?void 0:s.fullName)||(s==null?void 0:s.email)]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 bg-green-100 text-green-800 px-4 py-2 rounded-lg hover:bg-green-200 transition-colors",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsxs("span",{children:["₹",s==null?void 0:s.walletBalance]})]}),e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Active Sessions"}),e.jsx("div",{className:"space-y-4",children:a.filter(h=>h.isActive).map(h=>{const c=x(h.time,h.betsCloseAt),N=b(h.betsCloseAt),m=f(h.id),o=m.reduce((y,w)=>y+w.amount,0);return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.name||`Session ${h.time}`}),e.jsxs("p",{className:"text-gray-600",children:["Time: ",h.time]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Betting closes at ",h.betsCloseAt]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center text-blue-600 mb-2",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-mono",children:c})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Pool: ₹",h.totalPool]})]})]}),m.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:["Your bets: ",m.map(y=>`${y.number} (₹${y.amount})`).join(", ")]}),e.jsxs("p",{className:"text-sm text-blue-600",children:["Total: ₹",o]})]}),e.jsx("button",{onClick:()=>n(h.id),disabled:!N,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors ${N?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:N?"Place Bet":"Betting Closed"})]},h.id)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Previous Results"}),e.jsx("div",{className:"space-y-4",children:i.slice(-5).reverse().map(h=>{const c=a.find(o=>o.id===h.sessionId),m=l.filter(o=>o.sessionId===h.sessionId&&o.userId===(s==null?void 0:s.id)&&o.number===h.winningNumber).length>0;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:(c==null?void 0:c.name)||`Session ${c==null?void 0:c.time}`}),e.jsx("p",{className:"text-sm text-gray-600",children:P(h.timestamp,"MMM dd, HH:mm")})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center text-yellow-600",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-bold text-lg",children:h.winningNumber})]})})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:["Pool: ₹",h.totalPool]}),e.jsxs("p",{children:["Winners: ",h.winnerCount]}),m&&e.jsxs("p",{className:"text-green-600 font-medium",children:["You won: ₹",h.winnerPayout]})]})]},h.id)})})]})]})}),r&&e.jsx($e,{sessionId:r,onClose:()=>n(null)}),p&&e.jsx(Le,{onClose:()=>u(!1)})]})},Ue=()=>{const{sessions:s,bets:t,createSession:a,processJackpot:i}=O(),[l,r]=d.useState(!1),[n,p]=d.useState(""),[u,g]=d.useState(""),[j,x]=d.useState(new Date);d.useEffect(()=>{const c=setInterval(()=>{x(new Date),s.forEach(N=>{if(N.isActive){const m=P(new Date,"yyyy-MM-dd"),o=new Date(`${m}T${N.time}:00`);R(j,o)&&i(N.id)}})},1e3);return()=>clearInterval(c)},[s,i,j]);const b=()=>{n&&(a(n,u||void 0),p(""),g(""),r(!1))},f=c=>t.filter(N=>N.sessionId===c),h=c=>{const N=f(c),m={};for(let o=0;o<=9;o++)m[o]=0;return N.forEach(o=>{m[o.number]+=o.amount}),m};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Session Management"}),e.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Session"})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(c=>{const N=f(c.id),m=h(c.id),o=new Set(N.map(y=>y.userId)).size;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c.name||`Session ${c.time}`}),e.jsxs("p",{className:"text-gray-600",children:["Time: ",c.time]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created by: ",c.createdBy]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.isActive?"Active":"Completed"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-blue-600 mb-1",children:e.jsx(M,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Pool"}),e.jsxs("p",{className:"font-semibold",children:["₹",c.totalPool]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-green-600 mb-1",children:e.jsx(_,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Bettors"}),e.jsx("p",{className:"font-semibold",children:o})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-purple-600 mb-1",children:e.jsx(J,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Bets"}),e.jsx("p",{className:"font-semibold",children:N.length})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Bets by Number"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(m).map(([y,w])=>e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:y}),e.jsxs("div",{className:"text-xs text-gray-600",children:["₹",w]})]},y))})]})]},c.id)})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Session"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Time *"}),e.jsx("input",{type:"time",value:n,onChange:c=>p(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Name (Optional)"}),e.jsx("input",{type:"text",value:u,onChange:c=>g(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Evening Special"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:b,className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Session"})]})]})})})]})},qe=()=>{const{withdrawals:s,processWithdrawal:t}=O(),a=s.filter(n=>n.status==="pending"),i=s.filter(n=>n.status!=="pending"),l=n=>{t(n,"approved")},r=n=>{t(n,"rejected")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Withdrawal Management"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(z,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Pending Withdrawals (",a.length,")"]})}),a.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No pending withdrawal requests"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(n=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.userId}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["₹",n.amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P(n.requestedAt,"MMM dd, yyyy HH:mm")}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxs("button",{onClick:()=>l(n.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(ye,{className:"w-4 h-4 mr-1"}),"Approve"]}),e.jsxs("button",{onClick:()=>r(n.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]},n.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Processed Withdrawals (",i.length,")"]})}),i.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No processed withdrawals yet"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Processed At"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.slice().reverse().map(n=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.userId}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["₹",n.amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P(n.requestedAt,"MMM dd, yyyy HH:mm")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.processedAt&&P(n.processedAt,"MMM dd, yyyy HH:mm")})]},n.id))})]})})]})]})},Fe=()=>{const{bets:s,transactions:t}=O(),[a,i]=d.useState(""),l=[{id:"user1",email:"test@gmail.com",phone:"+91 9876543210",walletBalance:1e3,isAdmin:!1,createdAt:new Date("2024-01-15")}],r=u=>s.filter(g=>g.userId===u),n=u=>t.filter(g=>g.userId===u),p=l.filter(u=>{var g;return u.email.toLowerCase().includes(a.toLowerCase())||((g=u.phone)==null?void 0:g.includes(a))});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:a,onChange:u=>i(u.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search users..."})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wallet Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Bets"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transactions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(u=>{const g=r(u.id),j=n(u.id),x=g.reduce((b,f)=>b+f.amount,0);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.email}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",u.id]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.phone||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm font-medium text-green-600",children:[e.jsx(M,{className:"w-4 h-4 mr-1"}),"₹",u.walletBalance]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsxs("div",{children:[g.length," bets"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["₹",x," total"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.length}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxs("button",{className:"text-blue-600 hover:text-blue-900 inline-flex items-center",children:[e.jsx(G,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsxs("button",{className:"text-indigo-600 hover:text-indigo-900 inline-flex items-center",children:[e.jsx(je,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]},u.id)})})]})})}),p.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found matching your search."})]})},_e=()=>{const{logout:s}=I(),{sessions:t,bets:a,results:i,withdrawals:l}=O(),[r,n]=d.useState("overview"),p=t.reduce((b,f)=>b+f.totalPool,0),u=a.length,g=l.filter(b=>b.status==="pending").length,j=i.reduce((b,f)=>b+f.adminFee,0),x=[{id:"overview",label:"Overview",icon:Ne},{id:"sessions",label:"Sessions",icon:we},{id:"withdrawals",label:"Withdrawals",icon:M},{id:"users",label:"Users",icon:_}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"}),e.jsx("p",{className:"text-sm text-gray-600",children:"LuckyPick Lottery Management"})]}),e.jsxs("button",{onClick:s,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("div",{className:"w-64 bg-white rounded-lg shadow-md p-4",children:e.jsx("nav",{className:"space-y-2",children:x.map(b=>{const f=b.icon;return e.jsxs("button",{onClick:()=>n(b.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${r===b.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(f,{className:"w-5 h-5"}),e.jsx("span",{children:b.label})]},b.id)})})}),e.jsxs("div",{className:"flex-1",children:[r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(M,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Pool"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",p]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(J,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admin Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",j]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(z,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(_,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Withdrawals"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Results"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Session"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winning Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Pool"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin Fee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winners"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.slice(-5).reverse().map(b=>{const f=t.find(h=>h.id===b.sessionId);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(f==null?void 0:f.name)||(f==null?void 0:f.time)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:b.winningNumber})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",b.totalPool]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["₹",b.adminFee]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.winnerCount})]},b.id)})})]})})]})]}),r==="sessions"&&e.jsx(Ue,{}),r==="withdrawals"&&e.jsx(qe,{}),r==="users"&&e.jsx(Fe,{})]})]})})]})},He=()=>{const[s,t]=d.useState(null),[a,i]=d.useState(!1),[l,r]=d.useState(!1);return d.useEffect(()=>{const p=window.matchMedia("(display-mode: standalone)").matches,u=window.navigator.standalone===!0;r(p||u);const g=x=>{x.preventDefault(),t(x),i(!0)},j=()=>{r(!0),i(!1),t(null)};return window.addEventListener("beforeinstallprompt",g),window.addEventListener("appinstalled",j),()=>{window.removeEventListener("beforeinstallprompt",g),window.removeEventListener("appinstalled",j)}},[]),{isInstallable:a,isInstalled:l,installApp:async()=>{if(!s)return;s.prompt();const{outcome:p}=await s.userChoice;p==="accepted"&&(t(null),i(!1))}}},ze=()=>{const{isInstallable:s,installApp:t}=He(),[a,i]=F.useState(!1);return F.useEffect(()=>{if(s){const l=setTimeout(()=>{i(!0)},3e3);return()=>clearTimeout(l)}},[s]),!s||!a?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg z-50 md:left-auto md:right-4 md:max-w-sm",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ve,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Install LuckyPick"}),e.jsx("p",{className:"text-xs text-blue-100 mt-1",children:"Add to your home screen for quick access and offline use"}),e.jsxs("div",{className:"flex space-x-2 mt-3",children:[e.jsx("button",{onClick:t,className:"bg-white text-blue-600 px-3 py-1 rounded text-xs font-medium hover:bg-blue-50 transition-colors",children:"Install"}),e.jsx("button",{onClick:()=>i(!1),className:"text-blue-100 px-3 py-1 rounded text-xs hover:text-white transition-colors",children:"Later"})]})]}),e.jsx("button",{onClick:()=>i(!1),className:"flex-shrink-0 text-blue-200 hover:text-white transition-colors",children:e.jsx(U,{className:"w-4 h-4"})})]})})},Je=()=>{const{isOnline:s,wasOffline:t}=Y();return s&&!t?null:e.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 p-2 text-center text-sm font-medium transition-colors ${s?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:e.jsx("div",{className:"flex items-center justify-center space-x-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4"}),e.jsx("span",{children:"Back online - syncing data..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"You're offline - some features may be limited"})]})})})},Ye=()=>{const{user:s,loading:t}=I();return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading LuckyPick..."})]})}):s?s.isAdmin?e.jsx(_e,{}):e.jsx(Re,{}):e.jsx(We,{})};function Ke(){return e.jsx(oe,{children:e.jsx(Ie,{children:e.jsxs(Me,{children:[e.jsx(Je,{}),e.jsx(Ye,{}),e.jsx(ze,{})]})})})}H.createRoot(document.getElementById("root")).render(e.jsx(F.StrictMode,{children:e.jsx(Ke,{})}));
