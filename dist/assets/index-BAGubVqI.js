var xe=Object.defineProperty;var ue=(s,t,n)=>t in s?xe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var q=(s,t,n)=>ue(s,typeof t!="symbol"?t+"":t,n);import{r as x,a as he,b as V}from"./vendor-Gm9i_4Ku.js";import{B as ge}from"./router-CxV1K3nC.js";import{f as W,i as R,a as pe,b as fe}from"./utils-CsonoGMZ.js";import{M as _,P as H,L as ee,E as te,a as Y,U as ye,A as be,X as F,D as L,C as je,H as Ne,b as ne,c as we,W as ve,d as re,e as J,T as U,f as G,g as Se,h as Ae,S as Pe,i as ke,Z as z,j as Ce,k as se,l as De,m as Te,n as Be,o as $e}from"./icons-Bqcodkw1.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();var ie={exports:{}},Z={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We=x,Ee=Symbol.for("react.element"),Ie=Symbol.for("react.fragment"),Oe=Object.prototype.hasOwnProperty,Me=We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Re={key:!0,ref:!0,__self:!0,__source:!0};function le(s,t,n){var l,o={},r=null,i=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(i=t.ref);for(l in t)Oe.call(t,l)&&!Re.hasOwnProperty(l)&&(o[l]=t[l]);if(s&&s.defaultProps)for(l in t=s.defaultProps,t)o[l]===void 0&&(o[l]=t[l]);return{$$typeof:Ee,type:s,key:r,ref:i,props:o,_owner:Me.current}}Z.Fragment=Ie;Z.jsx=le;Z.jsxs=le;ie.exports=Z;var e=ie.exports,K={},ae=he;K.createRoot=ae.createRoot,K.hydrateRoot=ae.hydrateRoot;class Le{constructor(){q(this,"dbName","LuckyPickDB");q(this,"version",1);q(this,"db",null)}async init(){return new Promise((t,n)=>{const l=indexedDB.open(this.dbName,this.version);l.onerror=()=>n(l.error),l.onsuccess=()=>{this.db=l.result,t()},l.onupgradeneeded=o=>{const r=o.target.result;r.objectStoreNames.contains("sessions")||r.createObjectStore("sessions",{keyPath:"id"}),r.objectStoreNames.contains("bets")||r.createObjectStore("bets",{keyPath:"id"}),r.objectStoreNames.contains("results")||r.createObjectStore("results",{keyPath:"id"}),r.objectStoreNames.contains("transactions")||r.createObjectStore("transactions",{keyPath:"id"}),r.objectStoreNames.contains("user")||r.createObjectStore("user",{keyPath:"id"}),r.objectStoreNames.contains("offlineActions")||r.createObjectStore("offlineActions",{keyPath:"id",autoIncrement:!0})}})}async saveData(t,n){return this.db||await this.init(),new Promise((l,o)=>{const f=this.db.transaction([t],"readwrite").objectStore(t).put(n);f.onerror=()=>o(f.error),f.onsuccess=()=>l()})}async getData(t,n){return this.db||await this.init(),new Promise((l,o)=>{const i=this.db.transaction([t],"readonly").objectStore(t),f=n?i.get(n):i.getAll();f.onerror=()=>o(f.error),f.onsuccess=()=>l(f.result)})}async saveOfflineAction(t){const n={...t,timestamp:new Date().toISOString(),synced:!1};await this.saveData("offlineActions",n)}async getOfflineActions(){return(await this.getData("offlineActions")).filter(n=>!n.synced)}async markActionSynced(t){return this.db||await this.init(),new Promise((n,l)=>{const r=this.db.transaction(["offlineActions"],"readwrite").objectStore("offlineActions"),i=r.get(t);i.onsuccess=()=>{const f=i.result;if(f){f.synced=!0;const m=r.put(f);m.onsuccess=()=>n(),m.onerror=()=>l(m.error)}else n()},i.onerror=()=>l(i.error)})}}const D=new Le,X=()=>{const[s,t]=x.useState(navigator.onLine),[n,l]=x.useState(!1);return x.useEffect(()=>{const o=()=>{t(!0),n&&("serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(i=>i.sync.register("background-sync")),l(!1))},r=()=>{t(!1),l(!0)};return window.addEventListener("online",o),window.addEventListener("offline",r),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",r)}},[n]),{isOnline:s,wasOffline:n}},oe=x.createContext(void 0),M=()=>{const s=x.useContext(oe);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Ue=({children:s})=>{const[t,n]=x.useState(null),[l,o]=x.useState(!0),{isOnline:r}=X();x.useEffect(()=>{(async()=>{o(!0);try{const w=localStorage.getItem("user");if(w){const y=JSON.parse(w);n(y),await D.saveData("user",y)}else if(!r){const y=await D.getData("user","user1");y&&n(y)}}catch(w){console.error("Failed to load user data:",w)}finally{o(!1)}})()},[r]);const i=async(b,w)=>{try{if(b==="test@gmail.com"&&w==="12345677"){const y={id:"user1",email:b,fullName:"Demo User",isAdmin:!1,walletBalance:1e3,createdAt:new Date};return n(y),localStorage.setItem("user",JSON.stringify(y)),await D.saveData("user",y),!0}else if(b==="Admin@admin.com"&&w==="9794478972"){const y={id:"admin1",email:b,fullName:"System Admin",isAdmin:!0,walletBalance:0,createdAt:new Date};return n(y),localStorage.setItem("user",JSON.stringify(y)),await D.saveData("user",y),!0}return!1}catch(y){return console.error("Login failed:",y),!1}},f=()=>{n(null),localStorage.removeItem("user")},m=b=>{if(t){const w={...t,walletBalance:t.walletBalance+b};n(w),localStorage.setItem("user",JSON.stringify(w)),D.saveData("user",w),r||D.saveOfflineAction({type:"updateWallet",data:{userId:t.id,amount:b}})}};return e.jsx(oe.Provider,{value:{user:t,loading:l,login:i,logout:f,updateWallet:m},children:s})},ce=x.createContext(void 0),I=()=>{const s=x.useContext(ce);if(!s)throw new Error("useApp must be used within an AppProvider");return s},qe=({children:s})=>{const[t,n]=x.useState([]),[l,o]=x.useState([]),[r,i]=x.useState([]),[f,m]=x.useState([]),[b,w]=x.useState([]),{isOnline:y}=X();x.useEffect(()=>{(async()=>{try{if(await D.init(),!y){const h=await D.getData("sessions"),v=await D.getData("bets"),a=await D.getData("results"),d=await D.getData("transactions");h!=null&&h.length&&n(h),v!=null&&v.length&&o(v),a!=null&&a.length&&i(a),d!=null&&d.length&&m(d)}}catch(h){console.error("Failed to initialize offline storage:",h)}})()},[y]),x.useEffect(()=>{const c=()=>{const a=W(new Date,"yyyy-MM-dd");if(t.filter(p=>p.date===a).length===0){console.log("Creating today's sessions for",a);const p=[{id:`session-1430-${a}`,name:"Afternoon Draw",time:"14:30",date:a,isActive:!0,betsCloseAt:"14:25",totalPool:0,createdBy:"system"},{id:`session-1900-${a}`,name:"Evening Draw",time:"19:00",date:a,isActive:!0,betsCloseAt:"18:55",totalPool:0,createdBy:"system"}];n(S=>S.filter(N=>N.date===a).length===0?[...S,...p]:S),p.forEach(S=>{D.saveData("sessions",S)})}},h=W(new Date,"yyyy-MM-dd"),v=t.filter(a=>a.date===h);(t.length===0||v.length===0)&&c()},[t.length]),x.useEffect(()=>{const c=()=>{const v=new Date,a=W(v,"yyyy-MM-dd");t.forEach(d=>{if(d.isActive&&d.date===a){const p=new Date(`${a}T${d.time}:00`);R(v,p)&&(console.log(`Auto-processing jackpot for session ${d.id} at ${d.time}`),A(d.id))}})},h=setInterval(c,3e4);return c(),()=>clearInterval(h)},[t]),x.useEffect(()=>{t.forEach(c=>{D.saveData("sessions",c)})},[t]),x.useEffect(()=>{l.forEach(c=>{D.saveData("bets",c)})},[l]),x.useEffect(()=>{r.forEach(c=>{D.saveData("results",c)})},[r]),x.useEffect(()=>{f.forEach(c=>{D.saveData("transactions",c)})},[f]);const j=(c,h)=>{const v=W(new Date,"yyyy-MM-dd"),a=W(pe(new Date(`${v}T${c}:00`),-5),"HH:mm"),d={id:`session-${Date.now()}`,name:h,time:c,date:v,isActive:!0,betsCloseAt:a,totalPool:0,createdBy:"admin"};n(p=>[...p,d]),y||D.saveOfflineAction({type:"createSession",data:d})},u=(c,h,v,a)=>{const d=t.find(T=>T.id===c);if(!d)return!1;const p=new Date,S=W(p,"yyyy-MM-dd"),C=new Date(`${S}T${d.betsCloseAt}:00`);if(R(p,C))return!1;const N={id:`bet-${Date.now()}`,userId:a,sessionId:c,number:h,amount:v,timestamp:p};return o(T=>[...T,N]),n(T=>T.map($=>$.id===c?{...$,totalPool:$.totalPool+v}:$)),y||D.saveOfflineAction({type:"placeBet",data:N}),!0},A=c=>{const h=l.filter(k=>k.sessionId===c),v=t.find(k=>k.id===c);if(!v)return;if(h.length===0){n(k=>k.map(E=>E.id===c?{...E,isActive:!1}:E));return}const a={};for(let k=0;k<=9;k++)a[k]=0;h.forEach(k=>{a[k.number]+=k.amount});let d=0,p=a[0];for(let k=1;k<=9;k++)a[k]<p&&(d=k,p=a[k]);const S=v.totalPool,C=p===0&&S>0;let N,T,$;if(C)N=S,T=0,$=0;else{N=0;const k=h.filter(E=>E.number===d);$=k.length,T=0,$>0&&(k.forEach(E=>{const Q=E.amount*9,de={id:`win-${Date.now()}-${E.userId}-${Math.random()}`,userId:E.userId,type:"win",amount:Q,status:"completed",timestamp:new Date,description:`Jackpot win: ₹${E.amount} × 9 = ₹${Q} for number ${d} in session ${v.time}`};m(me=>[...me,de])}),T=k[0].amount*9)}const O={id:`result-${Date.now()}`,sessionId:c,winningNumber:d,totalPool:S,adminFee:N,winnerCount:$,winnerPayout:C?0:T,timestamp:new Date,isZeroBetWin:C};i(k=>[...k,O]),n(k=>k.map(E=>E.id===c?{...E,isActive:!1}:E)),console.log(`Jackpot processed for session ${c}:`,{winningNumber:d,totalPool:S,adminFee:N,winnerCount:$,winnerPayout:C?0:"9x bet amount per winner",isZeroBetWin:C}),y||D.saveOfflineAction({type:"processJackpot",data:{sessionId:c,result:O}})},P=c=>{const h={...c,id:`txn-${Date.now()}`};m(v=>[...v,h]),y||D.saveOfflineAction({type:"addTransaction",data:h})},B=(c,h)=>{const v={id:`withdrawal-${Date.now()}`,userId:c,amount:h,status:"pending",requestedAt:new Date};w(a=>[...a,v]),y||D.saveOfflineAction({type:"requestWithdrawal",data:v})},g=(c,h)=>{w(v=>v.map(a=>a.id===c?{...a,status:h,processedAt:new Date,processedBy:"admin"}:a)),y||D.saveOfflineAction({type:"processWithdrawal",data:{id:c,status:h}})};return e.jsx(ce.Provider,{value:{sessions:t,bets:l,results:r,transactions:f,withdrawals:b,createSession:j,placeBet:u,processJackpot:A,addTransaction:P,requestWithdrawal:B,processWithdrawal:g},children:s})},Fe=()=>{const[s,t]=x.useState("login"),[n,l]=x.useState("email"),[o,r]=x.useState(""),[i,f]=x.useState(""),[m,b]=x.useState(""),[w,y]=x.useState(""),[j,u]=x.useState(""),[A,P]=x.useState(!1),[B,g]=x.useState(""),[c,h]=x.useState(!1),{login:v}=M(),a=async N=>{N.preventDefault(),g(""),h(!0);try{await v(o,m)||g("Invalid credentials")}catch{g("Login failed")}finally{h(!1)}},d=async N=>{N.preventDefault(),g(""),h(!0);try{if(!o||!w||!m){g("Please fill in all required fields"),h(!1);return}if(m.length<6){g("Password must be at least 6 characters long"),h(!1);return}console.log("Sending OTP to:",o),t("verify"),g("")}catch{g("Signup failed")}finally{h(!1)}},p=async N=>{N.preventDefault(),g(""),h(!0);try{if(j.length!==6){g("Please enter a valid 6-digit OTP"),h(!1);return}j==="123456"||j.length===6?await v(o,m)?console.log("Account created and verified for:",o):g("Account creation failed"):g("Invalid OTP. Please try again.")}catch{g("Verification failed")}finally{h(!1)}},S=()=>{g(""),console.log("Resending OTP to:",o),g("OTP resent successfully!"),setTimeout(()=>g(""),3e3)},C=()=>{t("login"),r(""),f(""),b(""),y(""),u(""),g("")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"LuckyPick"}),e.jsx("p",{className:"text-gray-600",children:"Daily Number Lottery"})]}),s!=="verify"&&e.jsxs("div",{className:"flex mb-6 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>t("login"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="login"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Login"}),e.jsx("button",{type:"button",onClick:()=>t("signup"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="signup"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Sign Up"})]}),s==="login"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex mb-6 bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{type:"button",onClick:()=>l("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="email"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(_,{className:"w-4 h-4 inline mr-2"}),"Email"]}),e.jsxs("button",{type:"button",onClick:()=>l("phone"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="phone"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(H,{className:"w-4 h-4 inline mr-2"}),"Phone"]})]}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[n==="email"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",value:o,onChange:N=>r(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"tel",value:i,onChange:N=>f(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your phone number",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:A?"text":"password",value:m,onChange:N=>b(N.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>P(!A),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:A?e.jsx(te,{className:"w-5 h-5"}):e.jsx(Y,{className:"w-5 h-5"})})]})]}),B&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:B}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Signing In...":"Sign In"})]})]}),s==="signup"&&e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:w,onChange:N=>y(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",value:o,onChange:N=>r(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"tel",value:i,onChange:N=>f(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your phone number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:A?"text":"password",value:m,onChange:N=>b(N.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Create a password (min 6 characters)",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>P(!A),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:A?e.jsx(te,{className:"w-5 h-5"}):e.jsx(Y,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters long"})]}),B&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:B}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Creating Account...":"Create Account"})]}),s==="verify"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("button",{onClick:C,className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4",children:[e.jsx(be,{className:"w-4 h-4 mr-1"}),"Back to signup"]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Verify Your Email"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"We've sent a 6-digit verification code to"}),e.jsx("p",{className:"text-blue-600 font-medium",children:o})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),e.jsx("input",{type:"text",value:j,onChange:N=>u(N.target.value.replace(/\D/g,"").slice(0,6)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-lg font-mono tracking-widest",placeholder:"000000",maxLength:6,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"Enter the 6-digit code sent to your email"})]}),B&&e.jsx("div",{className:`text-sm text-center ${B.includes("resent")?"text-green-600":"text-red-600"}`,children:B}),e.jsx("button",{type:"submit",disabled:c||j.length!==6,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Verifying...":"Verify & Create Account"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Didn't receive the code?"," ",e.jsx("button",{type:"button",onClick:S,className:"text-blue-600 hover:text-blue-800 font-medium",children:"Resend OTP"})]})})]})]}),s==="login"&&e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Demo Accounts:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"User:"})," test@gmail.com / 12345677"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Admin:"})," Admin@admin.com / 9794478972"]})]})]}),s==="signup"&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Getting Started:"}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("p",{children:"• Create your account with email verification"}),e.jsx("p",{children:"• Start with ₹100 welcome bonus"}),e.jsx("p",{children:"• Play in daily lottery draws at 2:30 PM & 7:00 PM"}),e.jsx("p",{children:"• Win 9x your bet amount!"})]})]}),s==="verify"&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-yellow-800 mb-2",children:"Demo Mode:"}),e.jsxs("div",{className:"text-sm text-yellow-700",children:[e.jsx("p",{children:"For demo purposes, use any 6-digit code (e.g., 123456)"}),e.jsx("p",{children:"In production, a real OTP would be sent to your email."})]})]})]})})},Je=({sessionId:s,onClose:t})=>{const{user:n,updateWallet:l}=M(),{sessions:o,placeBet:r,addTransaction:i}=I(),[f,m]=x.useState(null),[b,w]=x.useState(""),[y,j]=x.useState(""),u=o.find(P=>P.id===s),A=()=>{if(f===null){j("Please select a number");return}const P=parseFloat(b);if(isNaN(P)||P<1){j("Minimum bet amount is ₹1");return}if(!n||P>n.walletBalance){j("Insufficient wallet balance");return}r(s,f,P,n.id)?(l(-P),i({userId:n.id,type:"bet",amount:-P,status:"completed",timestamp:new Date,description:`Bet on number ${f} for session ${u==null?void 0:u.time}`}),t()):j("Failed to place bet. Betting may be closed.")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Place Your Bet"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(F,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:(u==null?void 0:u.name)||`Session ${u==null?void 0:u.time}`}),e.jsx("p",{className:"text-gray-600",children:"Choose a number from 0-9"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Number"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[0,1,2,3,4,5,6,7,8,9].map(P=>e.jsx("button",{onClick:()=>m(P),className:`h-12 rounded-lg font-semibold transition-colors ${f===P?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:P},P))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bet Amount (₹)"}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"number",value:b,onChange:P=>w(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter amount (min ₹1)",min:"1",step:"1"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Wallet Balance: ₹",n==null?void 0:n.walletBalance]})]}),y&&e.jsx("div",{className:"mb-4 text-red-600 text-sm",children:y}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:A,className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Place Bet"})]})]})]})})},Ze=({onClose:s})=>{const{user:t,updateWallet:n}=M(),{transactions:l,addTransaction:o,requestWithdrawal:r}=I(),[i,f]=x.useState("balance"),[m,b]=x.useState(""),[w,y]=x.useState(""),[j,u]=x.useState(""),A=l.filter(g=>g.userId===(t==null?void 0:t.id)),P=()=>{const g=parseFloat(m);if(isNaN(g)||g<10){u("Minimum deposit amount is ₹10");return}t&&(n(g),o({userId:t.id,type:"deposit",amount:g,status:"completed",timestamp:new Date,description:"Wallet deposit via UPI"}),b(""),u(""))},B=()=>{const g=parseFloat(w);if(isNaN(g)||g<50){u("Minimum withdrawal amount is ₹50");return}if(!t||g>t.walletBalance){u("Insufficient balance");return}r(t.id,g),o({userId:t.id,type:"withdrawal",amount:-g,status:"pending",timestamp:new Date,description:`Withdrawal request for ₹${g}`}),y(""),u("")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"My Wallet"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(F,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>f("balance"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${i==="balance"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(je,{className:"w-4 h-4 inline mr-2"}),"Balance"]}),e.jsxs("button",{onClick:()=>f("history"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${i==="history"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(Ne,{className:"w-4 h-4 inline mr-2"}),"History"]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[i==="balance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["₹",t==null?void 0:t.walletBalance]}),e.jsx("p",{className:"text-gray-600",children:"Current Balance"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-green-800 mb-3 flex items-center",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Add Funds"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"number",value:m,onChange:g=>b(g.target.value),className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Amount (min ₹10)",min:"10"}),e.jsx("button",{onClick:P,className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Add via UPI"})]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-red-800 mb-3 flex items-center",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Withdraw Funds"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"number",value:w,onChange:g=>y(g.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Amount (min ₹50)",min:"50"}),e.jsx("button",{onClick:B,className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Request Withdrawal"}),e.jsx("p",{className:"text-xs text-red-600",children:"Requires admin approval"})]})]})]}),j&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:j})]}),i==="history"&&e.jsx("div",{className:"space-y-4",children:A.length===0?e.jsx("p",{className:"text-gray-500 text-center",children:"No transactions yet"}):A.slice().reverse().map(g=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:g.description}),e.jsx("p",{className:"text-sm text-gray-600",children:W(g.timestamp,"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${g.amount>0?"text-green-600":"text-red-600"}`,children:[g.amount>0?"+":"","₹",Math.abs(g.amount)]}),e.jsx("p",{className:`text-xs ${g.status==="completed"?"text-green-600":g.status==="pending"?"text-yellow-600":"text-red-600"}`,children:g.status})]})]},g.id))})]})]})})},_e=()=>{const{user:s,logout:t,updateWallet:n}=M(),{sessions:l,results:o,bets:r,transactions:i,addTransaction:f}=I(),[m,b]=x.useState(null),[w,y]=x.useState(!1),[j,u]=x.useState(new Date),[A,P]=x.useState(new Set);x.useEffect(()=>{const a=setInterval(()=>{u(new Date)},1e3);return()=>clearInterval(a)},[]),x.useEffect(()=>{if(!s)return;i.filter(d=>d.userId===s.id&&d.type==="win"&&d.status==="completed"&&!A.has(d.id)).forEach(d=>{i.find(S=>S.userId===s.id&&S.type==="deposit"&&S.description.includes(`Win credit: ${d.id}`))||(n(d.amount),f({userId:s.id,type:"deposit",amount:d.amount,status:"completed",timestamp:new Date,description:`Win credit: ${d.id} - Jackpot winnings (9x payout)`}),P(S=>new Set([...S,d.id])))})},[i,s,n,f,A]);const B=(a,d)=>{const p=W(new Date,"yyyy-MM-dd"),S=new Date(`${p}T${d}:00`),C=new Date(`${p}T${a}:00`);if(R(j,C))return"Session Ended";if(R(j,S))return"Betting Closed";const N=S.getTime()-j.getTime(),T=Math.floor(N/6e4),$=Math.floor(N%6e4/1e3);return`${T}:${$.toString().padStart(2,"0")}`},g=a=>{const d=W(new Date,"yyyy-MM-dd"),p=new Date(`${d}T${a}:00`);return fe(j,p)},c=a=>r.filter(d=>d.sessionId===a&&d.userId===(s==null?void 0:s.id)),h=a=>o.find(d=>d.sessionId===a),v=a=>{const d=h(a);if(!d)return null;const p=r.filter(S=>S.sessionId===a&&S.userId===(s==null?void 0:s.id)&&S.number===d.winningNumber);return p.length>0?{won:!0,amount:p.reduce((C,N)=>C+N.amount*9,0),winningNumber:d.winningNumber}:{won:!1,winningNumber:d.winningNumber}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"LuckyPick"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",(s==null?void 0:s.fullName)||(s==null?void 0:s.email)]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center space-x-2 bg-green-100 text-green-800 px-4 py-2 rounded-lg hover:bg-green-200 transition-colors",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsxs("span",{children:["₹",s==null?void 0:s.walletBalance]})]}),e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Active Sessions"}),e.jsx("div",{className:"space-y-4",children:l.filter(a=>a.isActive).map(a=>{var T,$;const d=B(a.time,a.betsCloseAt),p=g(a.betsCloseAt),S=c(a.id),C=S.reduce((O,k)=>O+k.amount,0),N=h(a.id);return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a.name||`Session ${a.time}`}),e.jsxs("p",{className:"text-gray-600",children:["Time: ",a.time]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Betting closes at ",a.betsCloseAt]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center text-blue-600 mb-2",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-mono",children:d})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Pool: ₹",a.totalPool]})]})]}),S.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:["Your bets: ",S.map(O=>`${O.number} (₹${O.amount})`).join(", ")]}),e.jsxs("p",{className:"text-sm text-blue-600",children:["Total: ₹",C]}),e.jsxs("p",{className:"text-xs text-blue-500",children:["Potential win: ₹",C*9," (9x payout)"]})]}),N&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 text-yellow-600 mr-2"}),e.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:["Result: Number ",N.winningNumber," Won!"]})]}),((T=v(a.id))==null?void 0:T.won)&&e.jsx("div",{className:"flex items-center text-green-600",children:e.jsxs("span",{className:"text-sm font-medium",children:["You won ₹",($=v(a.id))==null?void 0:$.amount,"!"]})})]})}),e.jsx("button",{onClick:()=>b(a.id),disabled:!p||!!N,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors ${p&&!N?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:N?"Session Completed":p?"Place Bet":"Betting Closed"})]},a.id)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Previous Results"}),e.jsx("div",{className:"space-y-4",children:o.slice(-5).reverse().map(a=>{const d=l.find(p=>p.id===a.sessionId);return e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:(d==null?void 0:d.name)||`Session ${d==null?void 0:d.time}`}),e.jsx("p",{className:"text-sm text-gray-600",children:W(a.timestamp,"MMM dd, HH:mm")})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center text-yellow-600",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-bold text-lg",children:a.winningNumber})]})})]})},a.id)})})]})]})}),m&&e.jsx(Je,{sessionId:m,onClose:()=>b(null)}),w&&e.jsx(Ze,{onClose:()=>y(!1)})]})};function He(s,t){const n=t.filter(j=>j.sessionId===s.id),l={};for(let j=0;j<=9;j++)l[j]=0;n.forEach(j=>{l[j.number]+=j.amount});let o=0,r=l[0];for(let j=1;j<=9;j++)l[j]<r&&(o=j,r=l[j]);const i=s.totalPool,f=r===0&&i>0;let m,b,w,y;if(f)m=i,b=0,w=0,y="Zero bet win - 100% to admin";else{m=0;const j=n.filter(u=>u.number===o);w=j.length,b=w>0?j[0].amount*9:0,y="9x multiplier - each winner gets 9 times their bet amount"}return{winningNumber:o,totalPool:i,adminFee:m,winnerCount:w,winnerPayout:b,isZeroBetWin:f,numberTotals:l,payoutRule:y}}function ze(s,t){if(!s.isActive)return!1;const n=new Date(`${s.date}T${s.time}:00`);return t>=n}function Ve(s,t){return s.filter(n=>ze(n,t))}function Ye(s,t){return`Jackpot Result for ${t}:
    Winning Number: ${s.winningNumber}
    Total Pool: ₹${s.totalPool}
    Admin Fee: ₹${s.adminFee}
    Winner Count: ${s.winnerCount}
    Payout Rule: ${s.payoutRule}
    Winner Payout: ${s.isZeroBetWin?"₹0":"₹"+s.winnerPayout+" per winner (9x bet amount)"}
    Zero Bet Win: ${s.isZeroBetWin}
    Number Distribution: ${JSON.stringify(s.numberTotals)}`}const Ge=()=>{const{sessions:s,bets:t,processJackpot:n}=I(),l=x.useRef(new Set);x.useEffect(()=>{const o=()=>{Ve(s,new Date).forEach(m=>{if(!l.current.has(m.id)){if(console.log(`Auto-processing jackpot for session ${m.id} at ${m.time}`),t.filter(w=>w.sessionId===m.id).length>0){const w=He(m,t);console.log(Ye(w,m.id))}n(m.id),l.current.add(m.id)}})},r=setInterval(o,3e4);return o(),()=>clearInterval(r)},[s,t,n]),x.useEffect(()=>{const o=new Set(s.map(i=>i.id));Array.from(l.current).forEach(i=>{o.has(i)||l.current.delete(i)})},[s])},Ke=()=>{const{sessions:s,bets:t,createSession:n,results:l}=I(),[o,r]=x.useState(!1),[i,f]=x.useState(""),[m,b]=x.useState(""),[w,y]=x.useState(new Date);x.useEffect(()=>{const c=setInterval(()=>{y(new Date)},1e3);return()=>clearInterval(c)},[]);const j=()=>{i&&(n(i,m||void 0),f(""),b(""),r(!1))},u=c=>t.filter(h=>h.sessionId===c),A=c=>{const h=u(c),v={};for(let a=0;a<=9;a++)v[a]=0;return h.forEach(a=>{v[a.number]+=a.amount}),v},P=c=>l.find(h=>h.sessionId===c),B=c=>{const h=W(new Date,"yyyy-MM-dd"),v=new Date(`${h}T${c.time}:00`);return P(c.id)?{status:"completed",color:"bg-green-100 text-green-800",text:"Completed"}:c.isActive?R(w,v)?{status:"processing",color:"bg-yellow-100 text-yellow-800",text:"Processing..."}:{status:"active",color:"bg-green-100 text-green-800",text:"Active"}:{status:"processed",color:"bg-blue-100 text-blue-800",text:"Processed"}},g=c=>{const h=W(new Date,"yyyy-MM-dd"),a=new Date(`${h}T${c}:00`).getTime()-w.getTime();if(a<=0)return"Session Time Reached";const d=Math.floor(a/(1e3*60*60)),p=Math.floor(a%(1e3*60*60)/(1e3*60)),S=Math.floor(a%(1e3*60)/1e3);return d>0?`${d}h ${p}m ${S}s`:p>0?`${p}m ${S}s`:`${S}s`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Session Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Jackpots are automatically processed at session end time"})]}),e.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Session"})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(c=>{const h=u(c.id),v=A(c.id),a=new Set(h.map(C=>C.userId)).size,d=B(c),p=P(c.id),S=g(c.time);return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c.name||`Session ${c.time}`}),e.jsxs("p",{className:"text-gray-600",children:["Time: ",c.time]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created by: ",c.createdBy]}),c.isActive&&e.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[e.jsx(J,{className:"w-3 h-3 inline mr-1"}),S]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.color}`,children:d.text}),p&&e.jsxs("div",{className:"mt-2 text-right",children:[e.jsxs("div",{className:"flex items-center text-yellow-600 text-sm",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{className:"font-bold",children:["Winner: ",p.winningNumber]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[p.winnerCount," winners",!p.isZeroBetWin&&e.jsx("span",{children:", 9x payout each"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-blue-600 mb-1",children:e.jsx(L,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Pool"}),e.jsxs("p",{className:"font-semibold",children:["₹",c.totalPool]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-green-600 mb-1",children:e.jsx(G,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Bettors"}),e.jsx("p",{className:"font-semibold",children:a})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-purple-600 mb-1",children:e.jsx(U,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Bets"}),e.jsx("p",{className:"font-semibold",children:h.length})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Bets by Number"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(v).map(([C,N])=>e.jsxs("div",{className:`text-center p-2 rounded ${p&&p.winningNumber===parseInt(C)?"bg-yellow-100 border-2 border-yellow-400":"bg-gray-50"}`,children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center justify-center",children:[C,p&&p.winningNumber===parseInt(C)&&e.jsx(Se,{className:"w-3 h-3 ml-1 text-yellow-600"})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["₹",N]})]},C))})]}),p&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Result Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Payout Rule:"}),e.jsx("p",{className:"font-semibold text-blue-600",children:p.isZeroBetWin?"Zero bet win":"9x multiplier"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Admin Earnings:"}),e.jsxs("p",{className:"font-semibold text-green-600",children:["₹",p.adminFee]})]}),p.isZeroBetWin&&e.jsx("div",{className:"col-span-2",children:e.jsx("p",{className:"text-xs text-orange-600 font-medium",children:"Zero Bet Win: No one bet on winning number"})})]})]})]},c.id)})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Session"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Time *"}),e.jsx("input",{type:"time",value:i,onChange:c=>f(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Name (Optional)"}),e.jsx("input",{type:"text",value:m,onChange:c=>b(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Evening Special"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:j,className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Session"})]})]})})})]})},Xe=()=>{const{withdrawals:s,processWithdrawal:t}=I(),n=s.filter(i=>i.status==="pending"),l=s.filter(i=>i.status!=="pending"),o=i=>{t(i,"approved")},r=i=>{t(i,"rejected")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Withdrawal Management"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(J,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Pending Withdrawals (",n.length,")"]})}),n.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No pending withdrawal requests"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.userId}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["₹",i.amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:W(i.requestedAt,"MMM dd, yyyy HH:mm")}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxs("button",{onClick:()=>o(i.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(Ae,{className:"w-4 h-4 mr-1"}),"Approve"]}),e.jsxs("button",{onClick:()=>r(i.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(F,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]},i.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Processed Withdrawals (",l.length,")"]})}),l.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No processed withdrawals yet"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Processed At"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.slice().reverse().map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.userId}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["₹",i.amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:W(i.requestedAt,"MMM dd, yyyy HH:mm")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.processedAt&&W(i.processedAt,"MMM dd, yyyy HH:mm")})]},i.id))})]})})]})]})},Qe=()=>{const{bets:s,transactions:t}=I(),[n,l]=x.useState(""),o=[{id:"user1",email:"test@gmail.com",phone:"+91 9876543210",walletBalance:1e3,isAdmin:!1,createdAt:new Date("2024-01-15")}],r=m=>s.filter(b=>b.userId===m),i=m=>t.filter(b=>b.userId===m),f=o.filter(m=>{var b;return m.email.toLowerCase().includes(n.toLowerCase())||((b=m.phone)==null?void 0:b.includes(n))});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsxs("div",{className:"relative",children:[e.jsx(Pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:n,onChange:m=>l(m.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search users..."})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wallet Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Bets"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transactions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(m=>{const b=r(m.id),w=i(m.id),y=b.reduce((j,u)=>j+u.amount,0);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.email}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",m.id]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.phone||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm font-medium text-green-600",children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),"₹",m.walletBalance]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsxs("div",{children:[b.length," bets"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["₹",y," total"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.length}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxs("button",{className:"text-blue-600 hover:text-blue-900 inline-flex items-center",children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsxs("button",{className:"text-indigo-600 hover:text-indigo-900 inline-flex items-center",children:[e.jsx(ke,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]},m.id)})})]})})}),f.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found matching your search."})]})},et=()=>{const{logout:s}=M(),{sessions:t,bets:n,results:l,withdrawals:o}=I(),[r,i]=x.useState("overview");Ge();const f=t.reduce((u,A)=>u+A.totalPool,0),m=n.length,b=o.filter(u=>u.status==="pending").length,w=l.reduce((u,A)=>u+(A.isZeroBetWin?A.adminFee:0),0),y=t.filter(u=>u.isActive).length,j=[{id:"overview",label:"Overview",icon:Ce},{id:"sessions",label:"Sessions",icon:se},{id:"withdrawals",label:"Withdrawals",icon:L},{id:"users",label:"Users",icon:G}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"LuckyPick Lottery Management"}),e.jsxs("div",{className:"flex items-center text-green-600 text-xs",children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:"Auto Jackpot Active"})]})]})]}),e.jsxs("button",{onClick:s,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("div",{className:"w-64 bg-white rounded-lg shadow-md p-4",children:e.jsx("nav",{className:"space-y-2",children:j.map(u=>{const A=u.icon;return e.jsxs("button",{onClick:()=>i(u.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${r===u.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{children:u.label})]},u.id)})})}),e.jsxs("div",{className:"flex-1",children:[r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Overview"}),e.jsxs("div",{className:"flex items-center text-sm text-green-600 bg-green-50 px-3 py-1 rounded-full",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Auto Processing Enabled"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(L,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Pool"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",f]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(U,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admin Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",w]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Zero bet wins only"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(J,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(G,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Withdrawals"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(se,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y})]})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6 border border-green-200",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(z,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Auto Jackpot System - 9x Payout Rule"}),e.jsx("p",{className:"text-gray-700 mb-3",children:"Jackpots are automatically calculated and published when sessions reach their end time. Winners receive 9 times their bet amount with no admin commission."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Winning Logic"}),e.jsx("p",{className:"text-gray-600",children:"Number with lowest total bets wins"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Payout Rule"}),e.jsx("p",{className:"text-gray-600",children:"Each winner gets 9x their bet amount"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Zero Bet Rule"}),e.jsx("p",{className:"text-gray-600",children:"100% to admin if no bets on winner"})]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Auto-Processed Results"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Session"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winning Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Pool"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payout Rule"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winners"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Processed At"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.slice(-5).reverse().map(u=>{const A=t.find(P=>P.id===u.sessionId);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(A==null?void 0:A.name)||(A==null?void 0:A.time)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:u.winningNumber})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",u.totalPool]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-600",children:u.isZeroBetWin?"Zero bet win":"9x multiplier"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[u.winnerCount,u.isZeroBetWin&&e.jsx("span",{className:"ml-1 text-xs text-orange-600",children:"(Zero bet)"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(u.timestamp).toLocaleString()})]},u.id)})})]})})]})]}),r==="sessions"&&e.jsx(Ke,{}),r==="withdrawals"&&e.jsx(Xe,{}),r==="users"&&e.jsx(Qe,{})]})]})})]})},tt=()=>{const[s,t]=x.useState(null),[n,l]=x.useState(!1),[o,r]=x.useState(!1);return x.useEffect(()=>{const f=window.matchMedia("(display-mode: standalone)").matches,m=window.navigator.standalone===!0;r(f||m);const b=y=>{y.preventDefault(),t(y),l(!0)},w=()=>{r(!0),l(!1),t(null)};return window.addEventListener("beforeinstallprompt",b),window.addEventListener("appinstalled",w),()=>{window.removeEventListener("beforeinstallprompt",b),window.removeEventListener("appinstalled",w)}},[]),{isInstallable:n,isInstalled:o,installApp:async()=>{if(!s)return;s.prompt();const{outcome:f}=await s.userChoice;f==="accepted"&&(t(null),l(!1))}}},st=()=>{const{isInstallable:s,installApp:t}=tt(),[n,l]=V.useState(!1);return V.useEffect(()=>{if(s){const o=setTimeout(()=>{l(!0)},3e3);return()=>clearTimeout(o)}},[s]),!s||!n?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg z-50 md:left-auto md:right-4 md:max-w-sm",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(De,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Install LuckyPick"}),e.jsx("p",{className:"text-xs text-blue-100 mt-1",children:"Add to your home screen for quick access and offline use"}),e.jsxs("div",{className:"flex space-x-2 mt-3",children:[e.jsx("button",{onClick:t,className:"bg-white text-blue-600 px-3 py-1 rounded text-xs font-medium hover:bg-blue-50 transition-colors",children:"Install"}),e.jsx("button",{onClick:()=>l(!1),className:"text-blue-100 px-3 py-1 rounded text-xs hover:text-white transition-colors",children:"Later"})]})]}),e.jsx("button",{onClick:()=>l(!1),className:"flex-shrink-0 text-blue-200 hover:text-white transition-colors",children:e.jsx(F,{className:"w-4 h-4"})})]})})},at=()=>{const{isOnline:s,wasOffline:t}=X();return s&&!t?null:e.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 p-2 text-center text-sm font-medium transition-colors ${s?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:e.jsx("div",{className:"flex items-center justify-center space-x-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{children:"Back online - syncing data..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"You're offline - some features may be limited"})]})})})},nt=()=>{const{user:s,loading:t}=M();return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx($e,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading LuckyPick..."})]})}):s?s.isAdmin?e.jsx(et,{}):e.jsx(_e,{}):e.jsx(Fe,{})};function rt(){return e.jsx(ge,{children:e.jsx(Ue,{children:e.jsxs(qe,{children:[e.jsx(at,{}),e.jsx(nt,{}),e.jsx(st,{})]})})})}K.createRoot(document.getElementById("root")).render(e.jsx(V.StrictMode,{children:e.jsx(rt,{})}));
