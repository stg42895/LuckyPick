var de=Object.defineProperty;var me=(s,t,n)=>t in s?de(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var q=(s,t,n)=>me(s,typeof t!="symbol"?t+"":t,n);import{r as x,a as xe,b as H}from"./vendor-Gm9i_4Ku.js";import{B as ue}from"./router-CxV1K3nC.js";import{f as T,i as R,a as he,b as pe}from"./utils-CsonoGMZ.js";import{M as X,P as G,L as ge,E as fe,a as te,X as J,D as L,C as ye,H as be,b as se,c as je,W as Ne,d as ae,e as F,T as U,U as z,f as we,g as ve,S as Se,h as Ae,Z as _,i as ke,j as Q,k as Pe,l as De,m as Ce,n as Be}from"./icons-BUmSW8zg.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var ne={exports:{}},Z={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $e=x,We=Symbol.for("react.element"),Te=Symbol.for("react.fragment"),Ee=Object.prototype.hasOwnProperty,Ie=$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Me={key:!0,ref:!0,__self:!0,__source:!0};function re(s,t,n){var l,o={},i=null,r=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(r=t.ref);for(l in t)Ee.call(t,l)&&!Me.hasOwnProperty(l)&&(o[l]=t[l]);if(s&&s.defaultProps)for(l in t=s.defaultProps,t)o[l]===void 0&&(o[l]=t[l]);return{$$typeof:We,type:s,key:i,ref:r,props:o,_owner:Ie.current}}Z.Fragment=Te;Z.jsx=re;Z.jsxs=re;ne.exports=Z;var e=ne.exports,Y={},ee=xe;Y.createRoot=ee.createRoot,Y.hydrateRoot=ee.hydrateRoot;class Oe{constructor(){q(this,"dbName","LuckyPickDB");q(this,"version",1);q(this,"db",null)}async init(){return new Promise((t,n)=>{const l=indexedDB.open(this.dbName,this.version);l.onerror=()=>n(l.error),l.onsuccess=()=>{this.db=l.result,t()},l.onupgradeneeded=o=>{const i=o.target.result;i.objectStoreNames.contains("sessions")||i.createObjectStore("sessions",{keyPath:"id"}),i.objectStoreNames.contains("bets")||i.createObjectStore("bets",{keyPath:"id"}),i.objectStoreNames.contains("results")||i.createObjectStore("results",{keyPath:"id"}),i.objectStoreNames.contains("transactions")||i.createObjectStore("transactions",{keyPath:"id"}),i.objectStoreNames.contains("user")||i.createObjectStore("user",{keyPath:"id"}),i.objectStoreNames.contains("offlineActions")||i.createObjectStore("offlineActions",{keyPath:"id",autoIncrement:!0})}})}async saveData(t,n){return this.db||await this.init(),new Promise((l,o)=>{const g=this.db.transaction([t],"readwrite").objectStore(t).put(n);g.onerror=()=>o(g.error),g.onsuccess=()=>l()})}async getData(t,n){return this.db||await this.init(),new Promise((l,o)=>{const r=this.db.transaction([t],"readonly").objectStore(t),g=n?r.get(n):r.getAll();g.onerror=()=>o(g.error),g.onsuccess=()=>l(g.result)})}async saveOfflineAction(t){const n={...t,timestamp:new Date().toISOString(),synced:!1};await this.saveData("offlineActions",n)}async getOfflineActions(){return(await this.getData("offlineActions")).filter(n=>!n.synced)}async markActionSynced(t){return this.db||await this.init(),new Promise((n,l)=>{const i=this.db.transaction(["offlineActions"],"readwrite").objectStore("offlineActions"),r=i.get(t);r.onsuccess=()=>{const g=r.result;if(g){g.synced=!0;const m=i.put(g);m.onsuccess=()=>n(),m.onerror=()=>l(m.error)}else n()},r.onerror=()=>l(r.error)})}}const C=new Oe,K=()=>{const[s,t]=x.useState(navigator.onLine),[n,l]=x.useState(!1);return x.useEffect(()=>{const o=()=>{t(!0),n&&("serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(r=>r.sync.register("background-sync")),l(!1))},i=()=>{t(!1),l(!0)};return window.addEventListener("online",o),window.addEventListener("offline",i),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",i)}},[n]),{isOnline:s,wasOffline:n}},ie=x.createContext(void 0),O=()=>{const s=x.useContext(ie);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Re=({children:s})=>{const[t,n]=x.useState(null),[l,o]=x.useState(!0),{isOnline:i}=K();x.useEffect(()=>{(async()=>{o(!0);try{const y=localStorage.getItem("user");if(y){const h=JSON.parse(y);n(h),await C.saveData("user",h)}else if(!i){const h=await C.getData("user","user1");h&&n(h)}}catch(y){console.error("Failed to load user data:",y)}finally{o(!1)}})()},[i]);const r=async(f,y)=>{try{if(f==="test@gmail.com"&&y==="12345677"){const h={id:"user1",email:f,fullName:"Demo User",isAdmin:!1,walletBalance:1e3,createdAt:new Date};return n(h),localStorage.setItem("user",JSON.stringify(h)),await C.saveData("user",h),!0}else if(f==="Admin@admin.com"&&y==="9794478972"){const h={id:"admin1",email:f,fullName:"System Admin",isAdmin:!0,walletBalance:0,createdAt:new Date};return n(h),localStorage.setItem("user",JSON.stringify(h)),await C.saveData("user",h),!0}return!1}catch(h){return console.error("Login failed:",h),!1}},g=()=>{n(null),localStorage.removeItem("user")},m=f=>{if(t){const y={...t,walletBalance:t.walletBalance+f};n(y),localStorage.setItem("user",JSON.stringify(y)),C.saveData("user",y),i||C.saveOfflineAction({type:"updateWallet",data:{userId:t.id,amount:f}})}};return e.jsx(ie.Provider,{value:{user:t,loading:l,login:r,logout:g,updateWallet:m},children:s})},le=x.createContext(void 0),I=()=>{const s=x.useContext(le);if(!s)throw new Error("useApp must be used within an AppProvider");return s},Le=({children:s})=>{const[t,n]=x.useState([]),[l,o]=x.useState([]),[i,r]=x.useState([]),[g,m]=x.useState([]),[f,y]=x.useState([]),{isOnline:h}=K();x.useEffect(()=>{(async()=>{try{if(await C.init(),!h){const b=await C.getData("sessions"),N=await C.getData("bets"),a=await C.getData("results"),d=await C.getData("transactions");b!=null&&b.length&&n(b),N!=null&&N.length&&o(N),a!=null&&a.length&&r(a),d!=null&&d.length&&m(d)}}catch(b){console.error("Failed to initialize offline storage:",b)}})()},[h]),x.useEffect(()=>{const c=()=>{const a=T(new Date,"yyyy-MM-dd");if(t.filter(p=>p.date===a).length===0){console.log("Creating today's sessions for",a);const p=[{id:`session-1430-${a}`,name:"Afternoon Draw",time:"14:30",date:a,isActive:!0,betsCloseAt:"14:25",totalPool:0,createdBy:"system"},{id:`session-1900-${a}`,name:"Evening Draw",time:"19:00",date:a,isActive:!0,betsCloseAt:"18:55",totalPool:0,createdBy:"system"}];n(w=>w.filter(D=>D.date===a).length===0?[...w,...p]:w),p.forEach(w=>{C.saveData("sessions",w)})}},b=T(new Date,"yyyy-MM-dd"),N=t.filter(a=>a.date===b);(t.length===0||N.length===0)&&c()},[t.length]),x.useEffect(()=>{const c=()=>{const N=new Date,a=T(N,"yyyy-MM-dd");t.forEach(d=>{if(d.isActive&&d.date===a){const p=new Date(`${a}T${d.time}:00`);R(N,p)&&(console.log(`Auto-processing jackpot for session ${d.id} at ${d.time}`),S(d.id))}})},b=setInterval(c,3e4);return c(),()=>clearInterval(b)},[t]),x.useEffect(()=>{t.forEach(c=>{C.saveData("sessions",c)})},[t]),x.useEffect(()=>{l.forEach(c=>{C.saveData("bets",c)})},[l]),x.useEffect(()=>{i.forEach(c=>{C.saveData("results",c)})},[i]),x.useEffect(()=>{g.forEach(c=>{C.saveData("transactions",c)})},[g]);const j=(c,b)=>{const N=T(new Date,"yyyy-MM-dd"),a=T(he(new Date(`${N}T${c}:00`),-5),"HH:mm"),d={id:`session-${Date.now()}`,name:b,time:c,date:N,isActive:!0,betsCloseAt:a,totalPool:0,createdBy:"admin"};n(p=>[...p,d]),h||C.saveOfflineAction({type:"createSession",data:d})},u=(c,b,N,a)=>{const d=t.find($=>$.id===c);if(!d)return!1;const p=new Date,w=T(p,"yyyy-MM-dd"),P=new Date(`${w}T${d.betsCloseAt}:00`);if(R(p,P))return!1;const D={id:`bet-${Date.now()}`,userId:a,sessionId:c,number:b,amount:N,timestamp:p};return o($=>[...$,D]),n($=>$.map(W=>W.id===c?{...W,totalPool:W.totalPool+N}:W)),h||C.saveOfflineAction({type:"placeBet",data:D}),!0},S=c=>{const b=l.filter(k=>k.sessionId===c),N=t.find(k=>k.id===c);if(!N)return;if(b.length===0){n(k=>k.map(E=>E.id===c?{...E,isActive:!1}:E));return}const a={};for(let k=0;k<=9;k++)a[k]=0;b.forEach(k=>{a[k.number]+=k.amount});let d=0,p=a[0];for(let k=1;k<=9;k++)a[k]<p&&(d=k,p=a[k]);const w=N.totalPool,P=p===0&&w>0;let D,$,W;if(P)D=w,$=0,W=0;else{D=0;const k=b.filter(E=>E.number===d);W=k.length,$=0,W>0&&(k.forEach(E=>{const V=E.amount*9,ce={id:`win-${Date.now()}-${E.userId}-${Math.random()}`,userId:E.userId,type:"win",amount:V,status:"completed",timestamp:new Date,description:`Jackpot win: ₹${E.amount} × 9 = ₹${V} for number ${d} in session ${N.time}`};m(oe=>[...oe,ce])}),$=k[0].amount*9)}const M={id:`result-${Date.now()}`,sessionId:c,winningNumber:d,totalPool:w,adminFee:D,winnerCount:W,winnerPayout:P?0:$,timestamp:new Date,isZeroBetWin:P};r(k=>[...k,M]),n(k=>k.map(E=>E.id===c?{...E,isActive:!1}:E)),console.log(`Jackpot processed for session ${c}:`,{winningNumber:d,totalPool:w,adminFee:D,winnerCount:W,winnerPayout:P?0:"9x bet amount per winner",isZeroBetWin:P}),h||C.saveOfflineAction({type:"processJackpot",data:{sessionId:c,result:M}})},A=c=>{const b={...c,id:`txn-${Date.now()}`};m(N=>[...N,b]),h||C.saveOfflineAction({type:"addTransaction",data:b})},B=(c,b)=>{const N={id:`withdrawal-${Date.now()}`,userId:c,amount:b,status:"pending",requestedAt:new Date};y(a=>[...a,N]),h||C.saveOfflineAction({type:"requestWithdrawal",data:N})},v=(c,b)=>{y(N=>N.map(a=>a.id===c?{...a,status:b,processedAt:new Date,processedBy:"admin"}:a)),h||C.saveOfflineAction({type:"processWithdrawal",data:{id:c,status:b}})};return e.jsx(le.Provider,{value:{sessions:t,bets:l,results:i,transactions:g,withdrawals:f,createSession:j,placeBet:u,processJackpot:S,addTransaction:A,requestWithdrawal:B,processWithdrawal:v},children:s})},Ue=()=>{const[s,t]=x.useState("email"),[n,l]=x.useState(""),[o,i]=x.useState(""),[r,g]=x.useState(""),[m,f]=x.useState(!1),[y,h]=x.useState(""),[j,u]=x.useState(!1),{login:S}=O(),A=async B=>{B.preventDefault(),h(""),u(!0);try{await S(n,r)||h("Invalid credentials")}catch{h("Login failed")}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"LuckyPick"}),e.jsx("p",{className:"text-gray-600",children:"Daily Number Lottery"})]}),e.jsxs("div",{className:"flex mb-6 bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{type:"button",onClick:()=>t("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="email"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(X,{className:"w-4 h-4 inline mr-2"}),"Email"]}),e.jsxs("button",{type:"button",onClick:()=>t("phone"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="phone"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(G,{className:"w-4 h-4 inline mr-2"}),"Phone"]})]}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[s==="email"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",value:n,onChange:B=>l(B.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"tel",value:o,onChange:B=>i(B.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your phone number",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:m?"text":"password",value:r,onChange:B=>g(B.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>f(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?e.jsx(fe,{className:"w-5 h-5"}):e.jsx(te,{className:"w-5 h-5"})})]})]}),y&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:y}),e.jsx("button",{type:"submit",disabled:j,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?"Signing In...":"Sign In"})]}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Demo Accounts:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"User:"})," test@gmail.com / 12345677"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Admin:"})," Admin@admin.com / 9794478972"]})]})]})]})})},qe=({sessionId:s,onClose:t})=>{const{user:n,updateWallet:l}=O(),{sessions:o,placeBet:i,addTransaction:r}=I(),[g,m]=x.useState(null),[f,y]=x.useState(""),[h,j]=x.useState(""),u=o.find(A=>A.id===s),S=()=>{if(g===null){j("Please select a number");return}const A=parseFloat(f);if(isNaN(A)||A<1){j("Minimum bet amount is ₹1");return}if(!n||A>n.walletBalance){j("Insufficient wallet balance");return}i(s,g,A,n.id)?(l(-A),r({userId:n.id,type:"bet",amount:-A,status:"completed",timestamp:new Date,description:`Bet on number ${g} for session ${u==null?void 0:u.time}`}),t()):j("Failed to place bet. Betting may be closed.")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Place Your Bet"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(J,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:(u==null?void 0:u.name)||`Session ${u==null?void 0:u.time}`}),e.jsx("p",{className:"text-gray-600",children:"Choose a number from 0-9"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Number"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[0,1,2,3,4,5,6,7,8,9].map(A=>e.jsx("button",{onClick:()=>m(A),className:`h-12 rounded-lg font-semibold transition-colors ${g===A?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:A},A))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bet Amount (₹)"}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"number",value:f,onChange:A=>y(A.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter amount (min ₹1)",min:"1",step:"1"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Wallet Balance: ₹",n==null?void 0:n.walletBalance]})]}),h&&e.jsx("div",{className:"mb-4 text-red-600 text-sm",children:h}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:S,className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Place Bet"})]})]})]})})},Je=({onClose:s})=>{const{user:t,updateWallet:n}=O(),{transactions:l,addTransaction:o,requestWithdrawal:i}=I(),[r,g]=x.useState("balance"),[m,f]=x.useState(""),[y,h]=x.useState(""),[j,u]=x.useState(""),S=l.filter(v=>v.userId===(t==null?void 0:t.id)),A=()=>{const v=parseFloat(m);if(isNaN(v)||v<10){u("Minimum deposit amount is ₹10");return}t&&(n(v),o({userId:t.id,type:"deposit",amount:v,status:"completed",timestamp:new Date,description:"Wallet deposit via UPI"}),f(""),u(""))},B=()=>{const v=parseFloat(y);if(isNaN(v)||v<50){u("Minimum withdrawal amount is ₹50");return}if(!t||v>t.walletBalance){u("Insufficient balance");return}i(t.id,v),o({userId:t.id,type:"withdrawal",amount:-v,status:"pending",timestamp:new Date,description:`Withdrawal request for ₹${v}`}),h(""),u("")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"My Wallet"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(J,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>g("balance"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${r==="balance"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(ye,{className:"w-4 h-4 inline mr-2"}),"Balance"]}),e.jsxs("button",{onClick:()=>g("history"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${r==="history"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(be,{className:"w-4 h-4 inline mr-2"}),"History"]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[r==="balance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["₹",t==null?void 0:t.walletBalance]}),e.jsx("p",{className:"text-gray-600",children:"Current Balance"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-green-800 mb-3 flex items-center",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Add Funds"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"number",value:m,onChange:v=>f(v.target.value),className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Amount (min ₹10)",min:"10"}),e.jsx("button",{onClick:A,className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Add via UPI"})]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-red-800 mb-3 flex items-center",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Withdraw Funds"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"number",value:y,onChange:v=>h(v.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Amount (min ₹50)",min:"50"}),e.jsx("button",{onClick:B,className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Request Withdrawal"}),e.jsx("p",{className:"text-xs text-red-600",children:"Requires admin approval"})]})]})]}),j&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:j})]}),r==="history"&&e.jsx("div",{className:"space-y-4",children:S.length===0?e.jsx("p",{className:"text-gray-500 text-center",children:"No transactions yet"}):S.slice().reverse().map(v=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:v.description}),e.jsx("p",{className:"text-sm text-gray-600",children:T(v.timestamp,"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${v.amount>0?"text-green-600":"text-red-600"}`,children:[v.amount>0?"+":"","₹",Math.abs(v.amount)]}),e.jsx("p",{className:`text-xs ${v.status==="completed"?"text-green-600":v.status==="pending"?"text-yellow-600":"text-red-600"}`,children:v.status})]})]},v.id))})]})]})})},Fe=()=>{const{user:s,logout:t,updateWallet:n}=O(),{sessions:l,results:o,bets:i,transactions:r,addTransaction:g}=I(),[m,f]=x.useState(null),[y,h]=x.useState(!1),[j,u]=x.useState(new Date),[S,A]=x.useState(new Set);x.useEffect(()=>{const a=setInterval(()=>{u(new Date)},1e3);return()=>clearInterval(a)},[]),x.useEffect(()=>{if(!s)return;r.filter(d=>d.userId===s.id&&d.type==="win"&&d.status==="completed"&&!S.has(d.id)).forEach(d=>{r.find(w=>w.userId===s.id&&w.type==="deposit"&&w.description.includes(`Win credit: ${d.id}`))||(n(d.amount),g({userId:s.id,type:"deposit",amount:d.amount,status:"completed",timestamp:new Date,description:`Win credit: ${d.id} - Jackpot winnings (9x payout)`}),A(w=>new Set([...w,d.id])))})},[r,s,n,g,S]);const B=(a,d)=>{const p=T(new Date,"yyyy-MM-dd"),w=new Date(`${p}T${d}:00`),P=new Date(`${p}T${a}:00`);if(R(j,P))return"Session Ended";if(R(j,w))return"Betting Closed";const D=w.getTime()-j.getTime(),$=Math.floor(D/6e4),W=Math.floor(D%6e4/1e3);return`${$}:${W.toString().padStart(2,"0")}`},v=a=>{const d=T(new Date,"yyyy-MM-dd"),p=new Date(`${d}T${a}:00`);return pe(j,p)},c=a=>i.filter(d=>d.sessionId===a&&d.userId===(s==null?void 0:s.id)),b=a=>o.find(d=>d.sessionId===a),N=a=>{const d=b(a);if(!d)return null;const p=i.filter(w=>w.sessionId===a&&w.userId===(s==null?void 0:s.id)&&w.number===d.winningNumber);return p.length>0?{won:!0,amount:p.reduce((P,D)=>P+D.amount*9,0),winningNumber:d.winningNumber}:{won:!1,winningNumber:d.winningNumber}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"LuckyPick"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",(s==null?void 0:s.fullName)||(s==null?void 0:s.email)]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 bg-green-100 text-green-800 px-4 py-2 rounded-lg hover:bg-green-200 transition-colors",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsxs("span",{children:["₹",s==null?void 0:s.walletBalance]})]}),e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Active Sessions"}),e.jsx("div",{className:"space-y-4",children:l.filter(a=>a.isActive).map(a=>{var $,W;const d=B(a.time,a.betsCloseAt),p=v(a.betsCloseAt),w=c(a.id),P=w.reduce((M,k)=>M+k.amount,0),D=b(a.id);return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a.name||`Session ${a.time}`}),e.jsxs("p",{className:"text-gray-600",children:["Time: ",a.time]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Betting closes at ",a.betsCloseAt]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center text-blue-600 mb-2",children:[e.jsx(F,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-mono",children:d})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Pool: ₹",a.totalPool]})]})]}),w.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:["Your bets: ",w.map(M=>`${M.number} (₹${M.amount})`).join(", ")]}),e.jsxs("p",{className:"text-sm text-blue-600",children:["Total: ₹",P]}),e.jsxs("p",{className:"text-xs text-blue-500",children:["Potential win: ₹",P*9," (9x payout)"]})]}),D&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 text-yellow-600 mr-2"}),e.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:["Result: Number ",D.winningNumber," Won!"]})]}),(($=N(a.id))==null?void 0:$.won)&&e.jsx("div",{className:"flex items-center text-green-600",children:e.jsxs("span",{className:"text-sm font-medium",children:["You won ₹",(W=N(a.id))==null?void 0:W.amount,"!"]})})]})}),e.jsx("button",{onClick:()=>f(a.id),disabled:!p||!!D,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors ${p&&!D?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:D?"Session Completed":p?"Place Bet":"Betting Closed"})]},a.id)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Previous Results"}),e.jsx("div",{className:"space-y-4",children:o.slice(-5).reverse().map(a=>{const d=l.find(p=>p.id===a.sessionId);return e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:(d==null?void 0:d.name)||`Session ${d==null?void 0:d.time}`}),e.jsx("p",{className:"text-sm text-gray-600",children:T(a.timestamp,"MMM dd, HH:mm")})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center text-yellow-600",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-bold text-lg",children:a.winningNumber})]})})]})},a.id)})})]})]})}),m&&e.jsx(qe,{sessionId:m,onClose:()=>f(null)}),y&&e.jsx(Je,{onClose:()=>h(!1)})]})};function Ze(s,t){const n=t.filter(j=>j.sessionId===s.id),l={};for(let j=0;j<=9;j++)l[j]=0;n.forEach(j=>{l[j.number]+=j.amount});let o=0,i=l[0];for(let j=1;j<=9;j++)l[j]<i&&(o=j,i=l[j]);const r=s.totalPool,g=i===0&&r>0;let m,f,y,h;if(g)m=r,f=0,y=0,h="Zero bet win - 100% to admin";else{m=0;const j=n.filter(u=>u.number===o);y=j.length,f=y>0?j[0].amount*9:0,h="9x multiplier - each winner gets 9 times their bet amount"}return{winningNumber:o,totalPool:r,adminFee:m,winnerCount:y,winnerPayout:f,isZeroBetWin:g,numberTotals:l,payoutRule:h}}function _e(s,t){if(!s.isActive)return!1;const n=new Date(`${s.date}T${s.time}:00`);return t>=n}function He(s,t){return s.filter(n=>_e(n,t))}function ze(s,t){return`Jackpot Result for ${t}:
    Winning Number: ${s.winningNumber}
    Total Pool: ₹${s.totalPool}
    Admin Fee: ₹${s.adminFee}
    Winner Count: ${s.winnerCount}
    Payout Rule: ${s.payoutRule}
    Winner Payout: ${s.isZeroBetWin?"₹0":"₹"+s.winnerPayout+" per winner (9x bet amount)"}
    Zero Bet Win: ${s.isZeroBetWin}
    Number Distribution: ${JSON.stringify(s.numberTotals)}`}const Ye=()=>{const{sessions:s,bets:t,processJackpot:n}=I(),l=x.useRef(new Set);x.useEffect(()=>{const o=()=>{He(s,new Date).forEach(m=>{if(!l.current.has(m.id)){if(console.log(`Auto-processing jackpot for session ${m.id} at ${m.time}`),t.filter(y=>y.sessionId===m.id).length>0){const y=Ze(m,t);console.log(ze(y,m.id))}n(m.id),l.current.add(m.id)}})},i=setInterval(o,3e4);return o(),()=>clearInterval(i)},[s,t,n]),x.useEffect(()=>{const o=new Set(s.map(r=>r.id));Array.from(l.current).forEach(r=>{o.has(r)||l.current.delete(r)})},[s])},Ke=()=>{const{sessions:s,bets:t,createSession:n,results:l}=I(),[o,i]=x.useState(!1),[r,g]=x.useState(""),[m,f]=x.useState(""),[y,h]=x.useState(new Date);x.useEffect(()=>{const c=setInterval(()=>{h(new Date)},1e3);return()=>clearInterval(c)},[]);const j=()=>{r&&(n(r,m||void 0),g(""),f(""),i(!1))},u=c=>t.filter(b=>b.sessionId===c),S=c=>{const b=u(c),N={};for(let a=0;a<=9;a++)N[a]=0;return b.forEach(a=>{N[a.number]+=a.amount}),N},A=c=>l.find(b=>b.sessionId===c),B=c=>{const b=T(new Date,"yyyy-MM-dd"),N=new Date(`${b}T${c.time}:00`);return A(c.id)?{status:"completed",color:"bg-green-100 text-green-800",text:"Completed"}:c.isActive?R(y,N)?{status:"processing",color:"bg-yellow-100 text-yellow-800",text:"Processing..."}:{status:"active",color:"bg-green-100 text-green-800",text:"Active"}:{status:"processed",color:"bg-blue-100 text-blue-800",text:"Processed"}},v=c=>{const b=T(new Date,"yyyy-MM-dd"),a=new Date(`${b}T${c}:00`).getTime()-y.getTime();if(a<=0)return"Session Time Reached";const d=Math.floor(a/(1e3*60*60)),p=Math.floor(a%(1e3*60*60)/(1e3*60)),w=Math.floor(a%(1e3*60)/1e3);return d>0?`${d}h ${p}m ${w}s`:p>0?`${p}m ${w}s`:`${w}s`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Session Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Jackpots are automatically processed at session end time"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Session"})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(c=>{const b=u(c.id),N=S(c.id),a=new Set(b.map(P=>P.userId)).size,d=B(c),p=A(c.id),w=v(c.time);return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c.name||`Session ${c.time}`}),e.jsxs("p",{className:"text-gray-600",children:["Time: ",c.time]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created by: ",c.createdBy]}),c.isActive&&e.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[e.jsx(F,{className:"w-3 h-3 inline mr-1"}),w]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.color}`,children:d.text}),p&&e.jsxs("div",{className:"mt-2 text-right",children:[e.jsxs("div",{className:"flex items-center text-yellow-600 text-sm",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{className:"font-bold",children:["Winner: ",p.winningNumber]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[p.winnerCount," winners",!p.isZeroBetWin&&e.jsx("span",{children:", 9x payout each"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-blue-600 mb-1",children:e.jsx(L,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Pool"}),e.jsxs("p",{className:"font-semibold",children:["₹",c.totalPool]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-green-600 mb-1",children:e.jsx(z,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Bettors"}),e.jsx("p",{className:"font-semibold",children:a})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-purple-600 mb-1",children:e.jsx(U,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Bets"}),e.jsx("p",{className:"font-semibold",children:b.length})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Bets by Number"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(N).map(([P,D])=>e.jsxs("div",{className:`text-center p-2 rounded ${p&&p.winningNumber===parseInt(P)?"bg-yellow-100 border-2 border-yellow-400":"bg-gray-50"}`,children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center justify-center",children:[P,p&&p.winningNumber===parseInt(P)&&e.jsx(we,{className:"w-3 h-3 ml-1 text-yellow-600"})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["₹",D]})]},P))})]}),p&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Result Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Payout Rule:"}),e.jsx("p",{className:"font-semibold text-blue-600",children:p.isZeroBetWin?"Zero bet win":"9x multiplier"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Admin Earnings:"}),e.jsxs("p",{className:"font-semibold text-green-600",children:["₹",p.adminFee]})]}),p.isZeroBetWin&&e.jsx("div",{className:"col-span-2",children:e.jsx("p",{className:"text-xs text-orange-600 font-medium",children:"Zero Bet Win: No one bet on winning number"})})]})]})]},c.id)})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Session"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Time *"}),e.jsx("input",{type:"time",value:r,onChange:c=>g(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Name (Optional)"}),e.jsx("input",{type:"text",value:m,onChange:c=>f(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Evening Special"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>i(!1),className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:j,className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Session"})]})]})})})]})},Ve=()=>{const{withdrawals:s,processWithdrawal:t}=I(),n=s.filter(r=>r.status==="pending"),l=s.filter(r=>r.status!=="pending"),o=r=>{t(r,"approved")},i=r=>{t(r,"rejected")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Withdrawal Management"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(F,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Pending Withdrawals (",n.length,")"]})}),n.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No pending withdrawal requests"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.userId}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["₹",r.amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T(r.requestedAt,"MMM dd, yyyy HH:mm")}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxs("button",{onClick:()=>o(r.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(ve,{className:"w-4 h-4 mr-1"}),"Approve"]}),e.jsxs("button",{onClick:()=>i(r.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]},r.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Processed Withdrawals (",l.length,")"]})}),l.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No processed withdrawals yet"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Processed At"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.slice().reverse().map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.userId}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["₹",r.amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T(r.requestedAt,"MMM dd, yyyy HH:mm")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.processedAt&&T(r.processedAt,"MMM dd, yyyy HH:mm")})]},r.id))})]})})]})]})},Xe=()=>{const{bets:s,transactions:t}=I(),[n,l]=x.useState(""),o=[{id:"user1",email:"test@gmail.com",phone:"+91 9876543210",walletBalance:1e3,isAdmin:!1,createdAt:new Date("2024-01-15")}],i=m=>s.filter(f=>f.userId===m),r=m=>t.filter(f=>f.userId===m),g=o.filter(m=>{var f;return m.email.toLowerCase().includes(n.toLowerCase())||((f=m.phone)==null?void 0:f.includes(n))});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:n,onChange:m=>l(m.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search users..."})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wallet Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Bets"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transactions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(m=>{const f=i(m.id),y=r(m.id),h=f.reduce((j,u)=>j+u.amount,0);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.email}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",m.id]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.phone||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm font-medium text-green-600",children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),"₹",m.walletBalance]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsxs("div",{children:[f.length," bets"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["₹",h," total"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.length}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxs("button",{className:"text-blue-600 hover:text-blue-900 inline-flex items-center",children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsxs("button",{className:"text-indigo-600 hover:text-indigo-900 inline-flex items-center",children:[e.jsx(Ae,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]},m.id)})})]})})}),g.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found matching your search."})]})},Ge=()=>{const{logout:s}=O(),{sessions:t,bets:n,results:l,withdrawals:o}=I(),[i,r]=x.useState("overview");Ye();const g=t.reduce((u,S)=>u+S.totalPool,0),m=n.length,f=o.filter(u=>u.status==="pending").length,y=l.reduce((u,S)=>u+(S.isZeroBetWin?S.adminFee:0),0),h=t.filter(u=>u.isActive).length,j=[{id:"overview",label:"Overview",icon:ke},{id:"sessions",label:"Sessions",icon:Q},{id:"withdrawals",label:"Withdrawals",icon:L},{id:"users",label:"Users",icon:z}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"LuckyPick Lottery Management"}),e.jsxs("div",{className:"flex items-center text-green-600 text-xs",children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:"Auto Jackpot Active"})]})]})]}),e.jsxs("button",{onClick:s,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("div",{className:"w-64 bg-white rounded-lg shadow-md p-4",children:e.jsx("nav",{className:"space-y-2",children:j.map(u=>{const S=u.icon;return e.jsxs("button",{onClick:()=>r(u.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${i===u.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:u.label})]},u.id)})})}),e.jsxs("div",{className:"flex-1",children:[i==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Overview"}),e.jsxs("div",{className:"flex items-center text-sm text-green-600 bg-green-50 px-3 py-1 rounded-full",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Auto Processing Enabled"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(L,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Pool"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",g]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(U,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admin Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",y]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Zero bet wins only"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(F,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(z,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Withdrawals"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(Q,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h})]})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6 border border-green-200",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(_,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Auto Jackpot System - 9x Payout Rule"}),e.jsx("p",{className:"text-gray-700 mb-3",children:"Jackpots are automatically calculated and published when sessions reach their end time. Winners receive 9 times their bet amount with no admin commission."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Winning Logic"}),e.jsx("p",{className:"text-gray-600",children:"Number with lowest total bets wins"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Payout Rule"}),e.jsx("p",{className:"text-gray-600",children:"Each winner gets 9x their bet amount"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Zero Bet Rule"}),e.jsx("p",{className:"text-gray-600",children:"100% to admin if no bets on winner"})]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Auto-Processed Results"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Session"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winning Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Pool"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payout Rule"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winners"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Processed At"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.slice(-5).reverse().map(u=>{const S=t.find(A=>A.id===u.sessionId);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(S==null?void 0:S.name)||(S==null?void 0:S.time)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:u.winningNumber})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",u.totalPool]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-600",children:u.isZeroBetWin?"Zero bet win":"9x multiplier"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[u.winnerCount,u.isZeroBetWin&&e.jsx("span",{className:"ml-1 text-xs text-orange-600",children:"(Zero bet)"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(u.timestamp).toLocaleString()})]},u.id)})})]})})]})]}),i==="sessions"&&e.jsx(Ke,{}),i==="withdrawals"&&e.jsx(Ve,{}),i==="users"&&e.jsx(Xe,{})]})]})})]})},Qe=()=>{const[s,t]=x.useState(null),[n,l]=x.useState(!1),[o,i]=x.useState(!1);return x.useEffect(()=>{const g=window.matchMedia("(display-mode: standalone)").matches,m=window.navigator.standalone===!0;i(g||m);const f=h=>{h.preventDefault(),t(h),l(!0)},y=()=>{i(!0),l(!1),t(null)};return window.addEventListener("beforeinstallprompt",f),window.addEventListener("appinstalled",y),()=>{window.removeEventListener("beforeinstallprompt",f),window.removeEventListener("appinstalled",y)}},[]),{isInstallable:n,isInstalled:o,installApp:async()=>{if(!s)return;s.prompt();const{outcome:g}=await s.userChoice;g==="accepted"&&(t(null),l(!1))}}},et=()=>{const{isInstallable:s,installApp:t}=Qe(),[n,l]=H.useState(!1);return H.useEffect(()=>{if(s){const o=setTimeout(()=>{l(!0)},3e3);return()=>clearTimeout(o)}},[s]),!s||!n?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg z-50 md:left-auto md:right-4 md:max-w-sm",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Pe,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Install LuckyPick"}),e.jsx("p",{className:"text-xs text-blue-100 mt-1",children:"Add to your home screen for quick access and offline use"}),e.jsxs("div",{className:"flex space-x-2 mt-3",children:[e.jsx("button",{onClick:t,className:"bg-white text-blue-600 px-3 py-1 rounded text-xs font-medium hover:bg-blue-50 transition-colors",children:"Install"}),e.jsx("button",{onClick:()=>l(!1),className:"text-blue-100 px-3 py-1 rounded text-xs hover:text-white transition-colors",children:"Later"})]})]}),e.jsx("button",{onClick:()=>l(!1),className:"flex-shrink-0 text-blue-200 hover:text-white transition-colors",children:e.jsx(J,{className:"w-4 h-4"})})]})})},tt=()=>{const{isOnline:s,wasOffline:t}=K();return s&&!t?null:e.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 p-2 text-center text-sm font-medium transition-colors ${s?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:e.jsx("div",{className:"flex items-center justify-center space-x-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:"Back online - syncing data..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsx("span",{children:"You're offline - some features may be limited"})]})})})},st=()=>{const{user:s,loading:t}=O();return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Be,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading LuckyPick..."})]})}):s?s.isAdmin?e.jsx(Ge,{}):e.jsx(Fe,{}):e.jsx(Ue,{})};function at(){return e.jsx(ue,{children:e.jsx(Re,{children:e.jsxs(Le,{children:[e.jsx(tt,{}),e.jsx(st,{}),e.jsx(et,{})]})})})}Y.createRoot(document.getElementById("root")).render(e.jsx(H.StrictMode,{children:e.jsx(at,{})}));
