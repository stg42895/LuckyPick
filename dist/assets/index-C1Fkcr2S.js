var ce=Object.defineProperty;var oe=(s,t,a)=>t in s?ce(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var L=(s,t,a)=>oe(s,typeof t!="symbol"?t+"":t,a);import{r as u,a as de,b as _}from"./vendor-Gm9i_4Ku.js";import{B as me}from"./router-CxV1K3nC.js";import{f as D,i as R,a as xe,b as ue}from"./utils-CsonoGMZ.js";import{M as X,P as Z,U as he,L as G,E as Q,a as H,X as q,D as $,C as pe,H as ge,b as te,c as fe,W as ye,d as se,e as Y,T as K,f as J,g as be,S as je,h as we,i as Ne,j as ve,k as Se,l as Ae,m as ke}from"./icons-DRQX5bRV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function a(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerPolicy&&(r.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?r.credentials="include":c.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(c){if(c.ep)return;c.ep=!0;const r=a(c);fetch(c.href,r)}})();var ae={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ce=u,Pe=Symbol.for("react.element"),De=Symbol.for("react.fragment"),Be=Object.prototype.hasOwnProperty,Ee=Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oe={key:!0,ref:!0,__self:!0,__source:!0};function re(s,t,a){var l,c={},r=null,n=null;a!==void 0&&(r=""+a),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(n=t.ref);for(l in t)Be.call(t,l)&&!Oe.hasOwnProperty(l)&&(c[l]=t[l]);if(s&&s.defaultProps)for(l in t=s.defaultProps,t)c[l]===void 0&&(c[l]=t[l]);return{$$typeof:Pe,type:s,key:r,ref:n,props:c,_owner:Ee.current}}F.Fragment=De;F.jsx=re;F.jsxs=re;ae.exports=F;var e=ae.exports,z={},ee=de;z.createRoot=ee.createRoot,z.hydrateRoot=ee.hydrateRoot;class Ie{constructor(){L(this,"dbName","LuckyPickDB");L(this,"version",1);L(this,"db",null)}async init(){return new Promise((t,a)=>{const l=indexedDB.open(this.dbName,this.version);l.onerror=()=>a(l.error),l.onsuccess=()=>{this.db=l.result,t()},l.onupgradeneeded=c=>{const r=c.target.result;r.objectStoreNames.contains("sessions")||r.createObjectStore("sessions",{keyPath:"id"}),r.objectStoreNames.contains("bets")||r.createObjectStore("bets",{keyPath:"id"}),r.objectStoreNames.contains("results")||r.createObjectStore("results",{keyPath:"id"}),r.objectStoreNames.contains("transactions")||r.createObjectStore("transactions",{keyPath:"id"}),r.objectStoreNames.contains("user")||r.createObjectStore("user",{keyPath:"id"}),r.objectStoreNames.contains("offlineActions")||r.createObjectStore("offlineActions",{keyPath:"id",autoIncrement:!0})}})}async saveData(t,a){return this.db||await this.init(),new Promise((l,c)=>{const b=this.db.transaction([t],"readwrite").objectStore(t).put(a);b.onerror=()=>c(b.error),b.onsuccess=()=>l()})}async getData(t,a){return this.db||await this.init(),new Promise((l,c)=>{const n=this.db.transaction([t],"readonly").objectStore(t),b=a?n.get(a):n.getAll();b.onerror=()=>c(b.error),b.onsuccess=()=>l(b.result)})}async saveOfflineAction(t){const a={...t,timestamp:new Date().toISOString(),synced:!1};await this.saveData("offlineActions",a)}async getOfflineActions(){return(await this.getData("offlineActions")).filter(a=>!a.synced)}async markActionSynced(t){return this.db||await this.init(),new Promise((a,l)=>{const r=this.db.transaction(["offlineActions"],"readwrite").objectStore("offlineActions"),n=r.get(t);n.onsuccess=()=>{const b=n.result;if(b){b.synced=!0;const i=r.put(b);i.onsuccess=()=>a(),i.onerror=()=>l(i.error)}else a()},n.onerror=()=>l(n.error)})}}const A=new Ie,V=()=>{const[s,t]=u.useState(navigator.onLine),[a,l]=u.useState(!1);return u.useEffect(()=>{const c=()=>{t(!0),a&&("serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(n=>n.sync.register("background-sync")),l(!1))},r=()=>{t(!1),l(!0)};return window.addEventListener("online",c),window.addEventListener("offline",r),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",r)}},[a]),{isOnline:s,wasOffline:a}},ne=u.createContext(void 0),M=()=>{const s=u.useContext(ne);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Te=({children:s})=>{const[t,a]=u.useState(null),{isOnline:l}=V();u.useEffect(()=>{(async()=>{try{const x=localStorage.getItem("user");if(x){const f=JSON.parse(x);a(f),await A.saveData("user",f)}else if(!l){const f=await A.getData("user","user1");f&&a(f)}}catch(x){console.error("Failed to load user data:",x)}})()},[l]);const c=async(i,x)=>{if(i==="test@gmail.com"&&x==="12345677"){const f={id:"user1",email:i,fullName:"Demo User",isAdmin:!1,walletBalance:1e3,createdAt:new Date};return a(f),localStorage.setItem("user",JSON.stringify(f)),await A.saveData("user",f),!0}else if(i==="Admin@admin.com"&&x==="9794478972"){const f={id:"admin1",email:i,fullName:"Admin User",isAdmin:!0,walletBalance:0,createdAt:new Date};return a(f),localStorage.setItem("user",JSON.stringify(f)),await A.saveData("user",f),!0}try{const j=JSON.parse(localStorage.getItem("registeredUsers")||"[]").find(o=>(o.email===i||o.phone===i)&&o.password===x);if(j){const o={id:j.id,email:j.email,phone:j.phone,fullName:j.fullName,isAdmin:!1,walletBalance:j.walletBalance||100,createdAt:new Date(j.createdAt)};return a(o),localStorage.setItem("user",JSON.stringify(o)),await A.saveData("user",o),!0}}catch(f){console.error("Error checking registered users:",f)}return!1},r=async i=>{try{const x=JSON.parse(localStorage.getItem("registeredUsers")||"[]"),f=x.some(h=>h.email===i.email),j=x.some(h=>h.phone===i.phone);if(f||j)return!1;const o={id:`user_${Date.now()}`,fullName:i.fullName,email:i.email,phone:i.phone,password:i.password,walletBalance:100,createdAt:new Date().toISOString()};x.push(o),localStorage.setItem("registeredUsers",JSON.stringify(x));const y={id:o.id,email:o.email,phone:o.phone,fullName:o.fullName,isAdmin:!1,walletBalance:o.walletBalance,createdAt:new Date(o.createdAt)};return a(y),localStorage.setItem("user",JSON.stringify(y)),await A.saveData("user",y),!0}catch(x){return console.error("Signup error:",x),!1}},n=()=>{a(null),localStorage.removeItem("user")},b=i=>{if(t){const x={...t,walletBalance:t.walletBalance+i};if(a(x),localStorage.setItem("user",JSON.stringify(x)),A.saveData("user",x),!["user1","admin1"].includes(t.id))try{const j=JSON.parse(localStorage.getItem("registeredUsers")||"[]").map(o=>o.id===t.id?{...o,walletBalance:x.walletBalance}:o);localStorage.setItem("registeredUsers",JSON.stringify(j))}catch(f){console.error("Error updating registered users:",f)}l||A.saveOfflineAction({type:"updateWallet",data:{userId:t.id,amount:i}})}};return e.jsx(ne.Provider,{value:{user:t,login:c,signup:r,logout:n,updateWallet:b},children:s})},le=u.createContext(void 0),I=()=>{const s=u.useContext(le);if(!s)throw new Error("useApp must be used within an AppProvider");return s},Me=({children:s})=>{const[t,a]=u.useState([]),[l,c]=u.useState([]),[r,n]=u.useState([]),[b,i]=u.useState([]),[x,f]=u.useState([]),{isOnline:j}=V();u.useEffect(()=>{(async()=>{try{if(await A.init(),!j){const p=await A.getData("sessions"),w=await A.getData("bets"),v=await A.getData("results"),C=await A.getData("transactions");p!=null&&p.length&&a(p),w!=null&&w.length&&c(w),v!=null&&v.length&&n(v),C!=null&&C.length&&i(C)}}catch(p){console.error("Failed to initialize offline storage:",p)}})()},[j]),u.useEffect(()=>{if(t.length===0){const m=D(new Date,"yyyy-MM-dd"),p=[{id:"session-1330",time:"13:30",date:m,isActive:!0,betsCloseAt:"13:25",totalPool:0,createdBy:"system"},{id:"session-1830",time:"18:30",date:m,isActive:!0,betsCloseAt:"18:25",totalPool:0,createdBy:"system"}];a(p),p.forEach(w=>{A.saveData("sessions",w)})}},[t.length]),u.useEffect(()=>{t.forEach(m=>{A.saveData("sessions",m)})},[t]),u.useEffect(()=>{l.forEach(m=>{A.saveData("bets",m)})},[l]),u.useEffect(()=>{r.forEach(m=>{A.saveData("results",m)})},[r]),u.useEffect(()=>{b.forEach(m=>{A.saveData("transactions",m)})},[b]);const o=(m,p)=>{const w=D(new Date,"yyyy-MM-dd"),v=D(xe(new Date(`${w}T${m}:00`),-5),"HH:mm"),C={id:`session-${Date.now()}`,name:p,time:m,date:w,isActive:!0,betsCloseAt:v,totalPool:0,createdBy:"admin"};a(B=>[...B,C]),j||A.saveOfflineAction({type:"createSession",data:C})},y=(m,p,w,v)=>{const C=t.find(P=>P.id===m);if(!C)return!1;const B=new Date,E=D(B,"yyyy-MM-dd"),T=new Date(`${E}T${C.betsCloseAt}:00`);if(R(B,T))return!1;const O={id:`bet-${Date.now()}`,userId:v,sessionId:m,number:p,amount:w,timestamp:B};return c(P=>[...P,O]),a(P=>P.map(S=>S.id===m?{...S,totalPool:S.totalPool+w}:S)),j||A.saveOfflineAction({type:"placeBet",data:O}),!0},h=m=>{const p=l.filter(k=>k.sessionId===m),w=t.find(k=>k.id===m);if(!w||p.length===0)return;const v={};for(let k=0;k<=9;k++)v[k]=0;p.forEach(k=>{v[k.number]+=k.amount});let C=0,B=v[0];for(let k=1;k<=9;k++)v[k]<B&&(C=k,B=v[k]);const E=w.totalPool,T=B===0&&E>0;let O,P,S;if(T)O=E,P=0,S=0;else{O=E*.1;const k=E*.9;S=p.filter(ie=>ie.number===C).length,P=S>0?k/S:0}const W={id:`result-${Date.now()}`,sessionId:m,winningNumber:C,totalPool:E,adminFee:O,winnerCount:S,winnerPayout:P,timestamp:new Date,isZeroBetWin:T};n(k=>[...k,W]),a(k=>k.map(U=>U.id===m?{...U,isActive:!1}:U)),j||A.saveOfflineAction({type:"processJackpot",data:{sessionId:m,result:W}})},d=m=>{const p={...m,id:`txn-${Date.now()}`};i(w=>[...w,p]),j||A.saveOfflineAction({type:"addTransaction",data:p})},N=(m,p)=>{const w={id:`withdrawal-${Date.now()}`,userId:m,amount:p,status:"pending",requestedAt:new Date};f(v=>[...v,w]),j||A.saveOfflineAction({type:"requestWithdrawal",data:w})},g=(m,p)=>{f(w=>w.map(v=>v.id===m?{...v,status:p,processedAt:new Date,processedBy:"admin"}:v)),j||A.saveOfflineAction({type:"processWithdrawal",data:{id:m,status:p}})};return e.jsx(le.Provider,{value:{sessions:t,bets:l,results:r,transactions:b,withdrawals:x,createSession:o,placeBet:y,processJackpot:h,addTransaction:d,requestWithdrawal:N,processWithdrawal:g},children:s})},We=()=>{const[s,t]=u.useState("login"),[a,l]=u.useState("email"),[c,r]=u.useState(""),[n,b]=u.useState(""),[i,x]=u.useState(""),[f,j]=u.useState(""),[o,y]=u.useState(""),[h,d]=u.useState(!1),[N,g]=u.useState(!1),[m,p]=u.useState(""),[w,v]=u.useState(!1),{login:C,signup:B}=M(),E=()=>{if(s==="signup"){if(!o.trim())return p("Full name is required"),!1;if(i.length<6)return p("Password must be at least 6 characters long"),!1;if(i!==f)return p("Passwords do not match"),!1;if(a==="email"&&!c.includes("@"))return p("Please enter a valid email address"),!1;if(a==="phone"&&n.length<10)return p("Please enter a valid phone number"),!1}return!0},T=async S=>{if(S.preventDefault(),p(""),!!E()){v(!0);try{s==="login"?await C(c,i)||p("Invalid credentials"):await B({fullName:o,email:a==="email"?c:"",phone:a==="phone"?n:"",password:i})||p("Registration failed. Email or phone may already be in use.")}catch{p(s==="login"?"Login failed":"Registration failed")}finally{v(!1)}}},O=()=>{r(""),b(""),x(""),j(""),y(""),p("")},P=S=>{t(S),O()};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"LuckyPick"}),e.jsx("p",{className:"text-gray-600",children:"Daily Number Lottery"})]}),e.jsxs("div",{className:"flex mb-6 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>P("login"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="login"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Sign In"}),e.jsx("button",{type:"button",onClick:()=>P("signup"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="signup"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Sign Up"})]}),e.jsxs("div",{className:"flex mb-6 bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{type:"button",onClick:()=>l("email"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${a==="email"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(X,{className:"w-4 h-4 inline mr-2"}),"Email"]}),e.jsxs("button",{type:"button",onClick:()=>l("phone"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${a==="phone"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(Z,{className:"w-4 h-4 inline mr-2"}),"Phone"]})]}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s==="signup"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:o,onChange:S=>y(S.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name",required:!0})]})]}),a==="email"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",value:c,onChange:S=>r(S.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"tel",value:n,onChange:S=>b(S.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your phone number",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:h?"text":"password",value:i,onChange:S=>x(S.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:s==="signup"?"Create a password (min 6 characters)":"Enter your password",required:!0,minLength:s==="signup"?6:void 0}),e.jsx("button",{type:"button",onClick:()=>d(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h?e.jsx(Q,{className:"w-5 h-5"}):e.jsx(H,{className:"w-5 h-5"})})]})]}),s==="signup"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:N?"text":"password",value:f,onChange:S=>j(S.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!N),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:N?e.jsx(Q,{className:"w-5 h-5"}):e.jsx(H,{className:"w-5 h-5"})})]})]}),m&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:m}),e.jsx("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w?s==="login"?"Signing In...":"Creating Account...":s==="login"?"Sign In":"Create Account"})]}),s==="login"&&e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Demo Accounts:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"User:"})," test@gmail.com / 12345677"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Admin:"})," Admin@admin.com / 9794478972"]})]})]}),s==="signup"&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Welcome to LuckyPick!"})," Create your account to start playing the daily number lottery. New users get ₹100 welcome bonus!"]})})]})})},$e=({sessionId:s,onClose:t})=>{const{user:a,updateWallet:l}=M(),{sessions:c,placeBet:r,addTransaction:n}=I(),[b,i]=u.useState(null),[x,f]=u.useState(""),[j,o]=u.useState(""),y=c.find(d=>d.id===s),h=()=>{if(b===null){o("Please select a number");return}const d=parseFloat(x);if(isNaN(d)||d<1){o("Minimum bet amount is ₹1");return}if(!a||d>a.walletBalance){o("Insufficient wallet balance");return}r(s,b,d,a.id)?(l(-d),n({userId:a.id,type:"bet",amount:-d,status:"completed",timestamp:new Date,description:`Bet on number ${b} for session ${y==null?void 0:y.time}`}),t()):o("Failed to place bet. Betting may be closed.")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Place Your Bet"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(q,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:(y==null?void 0:y.name)||`Session ${y==null?void 0:y.time}`}),e.jsx("p",{className:"text-gray-600",children:"Choose a number from 0-9"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Number"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[0,1,2,3,4,5,6,7,8,9].map(d=>e.jsx("button",{onClick:()=>i(d),className:`h-12 rounded-lg font-semibold transition-colors ${b===d?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:d},d))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bet Amount (₹)"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"number",value:x,onChange:d=>f(d.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter amount (min ₹1)",min:"1",step:"1"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Wallet Balance: ₹",a==null?void 0:a.walletBalance]})]}),j&&e.jsx("div",{className:"mb-4 text-red-600 text-sm",children:j}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:h,className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Place Bet"})]})]})]})})},Ue=({onClose:s})=>{const{user:t,updateWallet:a}=M(),{transactions:l,addTransaction:c,requestWithdrawal:r}=I(),[n,b]=u.useState("balance"),[i,x]=u.useState(""),[f,j]=u.useState(""),[o,y]=u.useState(""),h=l.filter(g=>g.userId===(t==null?void 0:t.id)),d=()=>{const g=parseFloat(i);if(isNaN(g)||g<10){y("Minimum deposit amount is ₹10");return}t&&(a(g),c({userId:t.id,type:"deposit",amount:g,status:"completed",timestamp:new Date,description:"Wallet deposit via UPI"}),x(""),y(""))},N=()=>{const g=parseFloat(f);if(isNaN(g)||g<50){y("Minimum withdrawal amount is ₹50");return}if(!t||g>t.walletBalance){y("Insufficient balance");return}r(t.id,g),c({userId:t.id,type:"withdrawal",amount:-g,status:"pending",timestamp:new Date,description:`Withdrawal request for ₹${g}`}),j(""),y("")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"My Wallet"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(q,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>b("balance"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${n==="balance"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(pe,{className:"w-4 h-4 inline mr-2"}),"Balance"]}),e.jsxs("button",{onClick:()=>b("history"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${n==="history"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(ge,{className:"w-4 h-4 inline mr-2"}),"History"]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[n==="balance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["₹",t==null?void 0:t.walletBalance]}),e.jsx("p",{className:"text-gray-600",children:"Current Balance"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-green-800 mb-3 flex items-center",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Add Funds"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"number",value:i,onChange:g=>x(g.target.value),className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Amount (min ₹10)",min:"10"}),e.jsx("button",{onClick:d,className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Add via UPI"})]})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-red-800 mb-3 flex items-center",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Withdraw Funds"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"number",value:f,onChange:g=>j(g.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Amount (min ₹50)",min:"50"}),e.jsx("button",{onClick:N,className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Request Withdrawal"}),e.jsx("p",{className:"text-xs text-red-600",children:"Requires admin approval"})]})]})]}),o&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:o})]}),n==="history"&&e.jsx("div",{className:"space-y-4",children:h.length===0?e.jsx("p",{className:"text-gray-500 text-center",children:"No transactions yet"}):h.slice().reverse().map(g=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:g.description}),e.jsx("p",{className:"text-sm text-gray-600",children:D(g.timestamp,"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${g.amount>0?"text-green-600":"text-red-600"}`,children:[g.amount>0?"+":"","₹",Math.abs(g.amount)]}),e.jsx("p",{className:`text-xs ${g.status==="completed"?"text-green-600":g.status==="pending"?"text-yellow-600":"text-red-600"}`,children:g.status})]})]},g.id))})]})]})})},Le=()=>{const{user:s,logout:t}=M(),{sessions:a,results:l,bets:c}=I(),[r,n]=u.useState(null),[b,i]=u.useState(!1),[x,f]=u.useState(new Date);u.useEffect(()=>{const h=setInterval(()=>{f(new Date)},1e3);return()=>clearInterval(h)},[]);const j=(h,d)=>{const N=D(new Date,"yyyy-MM-dd"),g=new Date(`${N}T${d}:00`),m=new Date(`${N}T${h}:00`);if(R(x,m))return"Session Ended";if(R(x,g))return"Betting Closed";const p=g.getTime()-x.getTime(),w=Math.floor(p/6e4),v=Math.floor(p%6e4/1e3);return`${w}:${v.toString().padStart(2,"0")}`},o=h=>{const d=D(new Date,"yyyy-MM-dd"),N=new Date(`${d}T${h}:00`);return ue(x,N)},y=h=>c.filter(d=>d.sessionId===h&&d.userId===(s==null?void 0:s.id));return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"LuckyPick"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",(s==null?void 0:s.fullName)||(s==null?void 0:s.email)]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 bg-green-100 text-green-800 px-4 py-2 rounded-lg hover:bg-green-200 transition-colors",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsxs("span",{children:["₹",s==null?void 0:s.walletBalance]})]}),e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Active Sessions"}),e.jsx("div",{className:"space-y-4",children:a.filter(h=>h.isActive).map(h=>{const d=j(h.time,h.betsCloseAt),N=o(h.betsCloseAt),g=y(h.id),m=g.reduce((p,w)=>p+w.amount,0);return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.name||`Session ${h.time}`}),e.jsxs("p",{className:"text-gray-600",children:["Time: ",h.time]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Betting closes at ",h.betsCloseAt]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center text-blue-600 mb-2",children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-mono",children:d})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Pool: ₹",h.totalPool]})]})]}),g.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:["Your bets: ",g.map(p=>`${p.number} (₹${p.amount})`).join(", ")]}),e.jsxs("p",{className:"text-sm text-blue-600",children:["Total: ₹",m]})]}),e.jsx("button",{onClick:()=>n(h.id),disabled:!N,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors ${N?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:N?"Place Bet":"Betting Closed"})]},h.id)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Previous Results"}),e.jsx("div",{className:"space-y-4",children:l.slice(-5).reverse().map(h=>{const d=a.find(m=>m.id===h.sessionId),g=c.filter(m=>m.sessionId===h.sessionId&&m.userId===(s==null?void 0:s.id)&&m.number===h.winningNumber).length>0;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:(d==null?void 0:d.name)||`Session ${d==null?void 0:d.time}`}),e.jsx("p",{className:"text-sm text-gray-600",children:D(h.timestamp,"MMM dd, HH:mm")})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center text-yellow-600",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-bold text-lg",children:h.winningNumber})]})})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:["Pool: ₹",h.totalPool]}),e.jsxs("p",{children:["Winners: ",h.winnerCount]}),g&&e.jsxs("p",{className:"text-green-600 font-medium",children:["You won: ₹",h.winnerPayout]})]})]},h.id)})})]})]})}),r&&e.jsx($e,{sessionId:r,onClose:()=>n(null)}),b&&e.jsx(Ue,{onClose:()=>i(!1)})]})},Re=()=>{const{sessions:s,bets:t,createSession:a,processJackpot:l}=I(),[c,r]=u.useState(!1),[n,b]=u.useState(""),[i,x]=u.useState(""),[f,j]=u.useState(new Date);u.useEffect(()=>{const d=setInterval(()=>{j(new Date),s.forEach(N=>{if(N.isActive){const g=D(new Date,"yyyy-MM-dd"),m=new Date(`${g}T${N.time}:00`);R(f,m)&&l(N.id)}})},1e3);return()=>clearInterval(d)},[s,l,f]);const o=()=>{n&&(a(n,i||void 0),b(""),x(""),r(!1))},y=d=>t.filter(N=>N.sessionId===d),h=d=>{const N=y(d),g={};for(let m=0;m<=9;m++)g[m]=0;return N.forEach(m=>{g[m.number]+=m.amount}),g};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Session Management"}),e.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Session"})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(d=>{const N=y(d.id),g=h(d.id),m=new Set(N.map(p=>p.userId)).size;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d.name||`Session ${d.time}`}),e.jsxs("p",{className:"text-gray-600",children:["Time: ",d.time]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created by: ",d.createdBy]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:d.isActive?"Active":"Completed"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-blue-600 mb-1",children:e.jsx($,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Pool"}),e.jsxs("p",{className:"font-semibold",children:["₹",d.totalPool]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-green-600 mb-1",children:e.jsx(J,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Bettors"}),e.jsx("p",{className:"font-semibold",children:m})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-purple-600 mb-1",children:e.jsx(K,{className:"w-4 h-4 mr-1"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Bets"}),e.jsx("p",{className:"font-semibold",children:N.length})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Bets by Number"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(g).map(([p,w])=>e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:p}),e.jsxs("div",{className:"text-xs text-gray-600",children:["₹",w]})]},p))})]})]},d.id)})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Session"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Time *"}),e.jsx("input",{type:"time",value:n,onChange:d=>b(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Name (Optional)"}),e.jsx("input",{type:"text",value:i,onChange:d=>x(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Evening Special"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:o,className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Session"})]})]})})})]})},qe=()=>{const{withdrawals:s,processWithdrawal:t}=I(),a=s.filter(n=>n.status==="pending"),l=s.filter(n=>n.status!=="pending"),c=n=>{t(n,"approved")},r=n=>{t(n,"rejected")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Withdrawal Management"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Y,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Pending Withdrawals (",a.length,")"]})}),a.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No pending withdrawal requests"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(n=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.userId}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["₹",n.amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D(n.requestedAt,"MMM dd, yyyy HH:mm")}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxs("button",{onClick:()=>c(n.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(be,{className:"w-4 h-4 mr-1"}),"Approve"]}),e.jsxs("button",{onClick:()=>r(n.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(q,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]},n.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Processed Withdrawals (",l.length,")"]})}),l.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No processed withdrawals yet"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Processed At"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.slice().reverse().map(n=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.userId}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["₹",n.amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D(n.requestedAt,"MMM dd, yyyy HH:mm")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.processedAt&&D(n.processedAt,"MMM dd, yyyy HH:mm")})]},n.id))})]})})]})]})},Fe=()=>{const{bets:s,transactions:t}=I(),[a,l]=u.useState(""),c=[{id:"user1",email:"test@gmail.com",phone:"+91 9876543210",walletBalance:1e3,isAdmin:!1,createdAt:new Date("2024-01-15")}],r=i=>s.filter(x=>x.userId===i),n=i=>t.filter(x=>x.userId===i),b=c.filter(i=>{var x;return i.email.toLowerCase().includes(a.toLowerCase())||((x=i.phone)==null?void 0:x.includes(a))});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsxs("div",{className:"relative",children:[e.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:a,onChange:i=>l(i.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search users..."})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wallet Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Bets"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transactions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(i=>{const x=r(i.id),f=n(i.id),j=x.reduce((o,y)=>o+y.amount,0);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:i.email}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",i.id]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.phone||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm font-medium text-green-600",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),"₹",i.walletBalance]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsxs("div",{children:[x.length," bets"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["₹",j," total"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.length}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxs("button",{className:"text-blue-600 hover:text-blue-900 inline-flex items-center",children:[e.jsx(H,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsxs("button",{className:"text-indigo-600 hover:text-indigo-900 inline-flex items-center",children:[e.jsx(we,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]},i.id)})})]})})}),b.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found matching your search."})]})},_e=()=>{const{logout:s}=M(),{sessions:t,bets:a,results:l,withdrawals:c}=I(),[r,n]=u.useState("overview"),b=t.reduce((o,y)=>o+y.totalPool,0),i=a.length,x=c.filter(o=>o.status==="pending").length,f=l.reduce((o,y)=>o+y.adminFee,0),j=[{id:"overview",label:"Overview",icon:Ne},{id:"sessions",label:"Sessions",icon:ve},{id:"withdrawals",label:"Withdrawals",icon:$},{id:"users",label:"Users",icon:J}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"}),e.jsx("p",{className:"text-sm text-gray-600",children:"LuckyPick Lottery Management"})]}),e.jsxs("button",{onClick:s,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("div",{className:"w-64 bg-white rounded-lg shadow-md p-4",children:e.jsx("nav",{className:"space-y-2",children:j.map(o=>{const y=o.icon;return e.jsxs("button",{onClick:()=>n(o.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${r===o.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{children:o.label})]},o.id)})})}),e.jsxs("div",{className:"flex-1",children:[r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx($,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Pool"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",b]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(K,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admin Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",f]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Y,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(J,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Withdrawals"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Results"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Session"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winning Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Pool"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin Fee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winners"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.slice(-5).reverse().map(o=>{const y=t.find(h=>h.id===o.sessionId);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(y==null?void 0:y.name)||(y==null?void 0:y.time)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:o.winningNumber})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",o.totalPool]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:["₹",o.adminFee]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.winnerCount})]},o.id)})})]})})]})]}),r==="sessions"&&e.jsx(Re,{}),r==="withdrawals"&&e.jsx(qe,{}),r==="users"&&e.jsx(Fe,{})]})]})})]})},He=()=>{const[s,t]=u.useState(null),[a,l]=u.useState(!1),[c,r]=u.useState(!1);return u.useEffect(()=>{const b=window.matchMedia("(display-mode: standalone)").matches,i=window.navigator.standalone===!0;r(b||i);const x=j=>{j.preventDefault(),t(j),l(!0)},f=()=>{r(!0),l(!1),t(null)};return window.addEventListener("beforeinstallprompt",x),window.addEventListener("appinstalled",f),()=>{window.removeEventListener("beforeinstallprompt",x),window.removeEventListener("appinstalled",f)}},[]),{isInstallable:a,isInstalled:c,installApp:async()=>{if(!s)return;s.prompt();const{outcome:b}=await s.userChoice;b==="accepted"&&(t(null),l(!1))}}},Je=()=>{const{isInstallable:s,installApp:t}=He(),[a,l]=_.useState(!1);return _.useEffect(()=>{if(s){const c=setTimeout(()=>{l(!0)},3e3);return()=>clearTimeout(c)}},[s]),!s||!a?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg z-50 md:left-auto md:right-4 md:max-w-sm",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Se,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Install LuckyPick"}),e.jsx("p",{className:"text-xs text-blue-100 mt-1",children:"Add to your home screen for quick access and offline use"}),e.jsxs("div",{className:"flex space-x-2 mt-3",children:[e.jsx("button",{onClick:t,className:"bg-white text-blue-600 px-3 py-1 rounded text-xs font-medium hover:bg-blue-50 transition-colors",children:"Install"}),e.jsx("button",{onClick:()=>l(!1),className:"text-blue-100 px-3 py-1 rounded text-xs hover:text-white transition-colors",children:"Later"})]})]}),e.jsx("button",{onClick:()=>l(!1),className:"flex-shrink-0 text-blue-200 hover:text-white transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})]})})},ze=()=>{const{isOnline:s,wasOffline:t}=V();return s&&!t?null:e.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 p-2 text-center text-sm font-medium transition-colors ${s?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:e.jsx("div",{className:"flex items-center justify-center space-x-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Back online - syncing data..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"You're offline - some features may be limited"})]})})})},Ye=()=>{const{user:s}=M();return s?s.isAdmin?e.jsx(_e,{}):e.jsx(Le,{}):e.jsx(We,{})};function Ke(){return e.jsx(me,{children:e.jsx(Te,{children:e.jsxs(Me,{children:[e.jsx(ze,{}),e.jsx(Ye,{}),e.jsx(Je,{})]})})})}z.createRoot(document.getElementById("root")).render(e.jsx(_.StrictMode,{children:e.jsx(Ke,{})}));
